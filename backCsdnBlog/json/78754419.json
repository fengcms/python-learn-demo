{"data":{"id":"78754419","title":"Python3 \u521d\u5b66\u5b9e\u8df5\u6848\u4f8b\uff082\uff09\u5c06\u6e90\u76ee\u5f55\u4e2d\u7684\u56fe\u7247\u7528MD5\u547d\u540d\u5e76\u53ef\u4ee5\u8bbe\u5b9a\u76ee\u6807\u76ee\u5f55","articleedittype":1,"description":"Python3 \u521d\u5b66\u5b9e\u8df5\u6848\u4f8b\uff082\uff09\u5c06\u6e90\u76ee\u5f55\u4e2d\u7684\u56fe\u7247\u7528MD5\u547d\u540d\u5e76\u53ef\u4ee5\u8bbe\u5b9a\u76ee\u6807\u76ee\u5f55\u5c1d\u8bd5\u4e86\u4e00\u4e0b\u7528 python \u5b9e\u73b0\u4e86\u4e00\u4e2a\u751f\u6210\u5bc6\u7801\u7684\u7a0b\u5e8f\u3002\u611f\u89c9\u8fd8\u662f\u6bd4\u8f83\u597d\u4e0a\u624b\u7684\u3002\u4f46\u662f\u90a3\u4e2a\u7a0b\u5e8f\u8fd8\u662f\u975e\u5e38\u7b80\u5355\u7684\u4e00\u4e2a\u5c0f\u7a0b\u5e8f\u3002\u8fd9\u6b21\u6211\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u66f4\u52a0\u590d\u6742\u7684\u7a0b\u5e8f\uff0c\u5c31\u662f\u6574\u7406\u56fe\u7247\u3002\u5217\u51fa\u9700\u6c42\n\u5c06\u56fe\u7247\u6587\u4ef6\u7528\u56fe\u7247\u7684 md5 \u503c\u8fdb\u884c\u91cd\u547d\u540d\u3002\n\u53ef\u4ee5\u8bbe\u5b9a\u6e90\u76ee\u5f55\n\u53ef\u4ee5\u8bbe\u5b9a\u76ee\u6807\u76ee\u5f55\n\u53ef\u4ee5\u8bbe\u5b9a\u662f\u79fb\u52a8\uff0c\u8fd8\u662f\u590d\u5236\n\u53c2\u6570\u53ef\u4ee5\u7f3a\u7701\n\u5217\u51fa\u8fd9\u4e9b\u9700\u6c42\uff0c\u6211\u5f00\u59cb\u8bbe\u8ba1\u6211\u7684\u7a0b\u5e8f","content":"<h1 id=\"python3-\u521d\u5b66\u5b9e\u8df5\u6848\u4f8b2\u5c06\u6e90\u76ee\u5f55\u4e2d\u7684\u56fe\u7247\u7528md5\u91cd\u547d\u540d\u540e\u79fb\u52a8\u6216\u590d\u5236\u5230\u76ee\u6807\u6587\u4ef6\u5939\">Python3 \u521d\u5b66\u5b9e\u8df5\u6848\u4f8b\uff082\uff09\u5c06\u6e90\u76ee\u5f55\u4e2d\u7684\u56fe\u7247\u7528MD5\u91cd\u547d\u540d\u540e\u79fb\u52a8\u6216\u590d\u5236\u5230\u76ee\u6807\u6587\u4ef6\u5939<\/h1>\n\n<p>\u5c1d\u8bd5\u4e86\u4e00\u4e0b\u7528 <code>python<\/code> \u5b9e\u73b0\u4e86\u4e00\u4e2a\u751f\u6210\u5bc6\u7801\u7684\u7a0b\u5e8f\u3002\u611f\u89c9\u8fd8\u662f\u6bd4\u8f83\u597d\u4e0a\u624b\u7684\u3002\u4f46\u662f\u90a3\u4e2a\u7a0b\u5e8f\u8fd8\u662f\u975e\u5e38\u7b80\u5355\u7684\u4e00\u4e2a\u5c0f\u7a0b\u5e8f\u3002\u8fd9\u6b21\u6211\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u66f4\u52a0\u590d\u6742\u7684\u7a0b\u5e8f\uff0c\u5c31\u662f\u6574\u7406\u56fe\u7247\u3002<\/p>\n\n<h2 id=\"\u5217\u51fa\u9700\u6c42\">\u5217\u51fa\u9700\u6c42<\/h2>\n\n<ol>\n<li>\u5c06\u56fe\u7247\u6587\u4ef6\u7528\u56fe\u7247\u7684 <code>md5<\/code> \u503c\u8fdb\u884c\u91cd\u547d\u540d\u3002<\/li>\n<li>\u53ef\u4ee5\u8bbe\u5b9a\u6e90\u76ee\u5f55<\/li>\n<li>\u53ef\u4ee5\u8bbe\u5b9a\u76ee\u6807\u76ee\u5f55<\/li>\n<li>\u53ef\u4ee5\u8bbe\u5b9a\u662f\u79fb\u52a8\uff0c\u8fd8\u662f\u590d\u5236<\/li>\n<li>\u53c2\u6570\u53ef\u4ee5\u7f3a\u7701<\/li>\n<\/ol>\n\n<p>\u5217\u51fa\u8fd9\u4e9b\u9700\u6c42\uff0c\u6211\u5f00\u59cb\u8bbe\u8ba1\u6211\u7684\u7a0b\u5e8f\u3002<\/p>\n\n\n\n<h2 id=\"\u6700\u7ec8\u5b9e\u73b0\u4ee3\u7801\">\u6700\u7ec8\u5b9e\u73b0\u4ee3\u7801<\/h2>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-comment\">#!\/usr\/bin\/env python3<\/span>\n<span class=\"hljs-comment\"># -*- coding: UTF-8 -*-<\/span>\n<span class=\"hljs-keyword\">import<\/span> sys\n<span class=\"hljs-keyword\">import<\/span> os\n<span class=\"hljs-comment\"># \u83b7\u53d6\u6587\u4ef6\u7c7b\u578b\u5e93<\/span>\n<span class=\"hljs-keyword\">import<\/span> imghdr\n<span class=\"hljs-comment\"># MD5\u5e93<\/span>\n<span class=\"hljs-keyword\">import<\/span> hashlib\n<span class=\"hljs-comment\"># \u6587\u4ef6\u64cd\u4f5c\u5e93<\/span>\n<span class=\"hljs-keyword\">import<\/span> shutil\n\n<span class=\"hljs-comment\"># \u8bbe\u5b9a\u9ed8\u8ba4\u53c2\u6570<\/span>\nsourceDir = <span class=\"hljs-string\">'.\/'<\/span>\ntargetDir = <span class=\"hljs-string\">'.\/'<\/span>\noperation = <span class=\"hljs-string\">'move'<\/span>\nimages = []\n\n<span class=\"hljs-comment\"># \u7528\u6237\u64cd\u4f5c\u8bf4\u660e<\/span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def<\/span> <span class=\"hljs-title\">Usage<\/span><span class=\"hljs-params\">()<\/span>:<\/span>\n    print(<span class=\"hljs-string\">'USAGE: md5img [source dir] [target dir] [-m | -c]'<\/span>)\n    sys.exit(<span class=\"hljs-number\">0<\/span>)\n\n<span class=\"hljs-comment\"># \u6839\u636e\u8f93\u5165\u7684\u53c2\u6570\uff0c\u8fdb\u884c\u4e0d\u540c\u7684\u5904\u7406<\/span>\n<span class=\"hljs-keyword\">if<\/span> len(sys.argv) == <span class=\"hljs-number\">1<\/span> <span class=\"hljs-keyword\">or<\/span> len(sys.argv) &gt; <span class=\"hljs-number\">4<\/span>:\n    Usage()\n\n<span class=\"hljs-keyword\">if<\/span> len(sys.argv) &gt;= <span class=\"hljs-number\">2<\/span>:\n    sourceDir = sys.argv[<span class=\"hljs-number\">1<\/span>]\n    targetDir = sys.argv[<span class=\"hljs-number\">1<\/span>]\n\n<span class=\"hljs-keyword\">if<\/span> len(sys.argv) &gt;= <span class=\"hljs-number\">3<\/span>:\n    targetDir = sys.argv[<span class=\"hljs-number\">2<\/span>]\n\n<span class=\"hljs-keyword\">if<\/span> len(sys.argv) == <span class=\"hljs-number\">4<\/span>:\n    <span class=\"hljs-keyword\">if<\/span> sys.argv[<span class=\"hljs-number\">3<\/span>] == <span class=\"hljs-string\">'-m'<\/span>:\n        operation = <span class=\"hljs-string\">'move'<\/span>\n    <span class=\"hljs-keyword\">elif<\/span> sys.argv[<span class=\"hljs-number\">3<\/span>] == <span class=\"hljs-string\">'-c'<\/span>:\n        operation = <span class=\"hljs-string\">'copy'<\/span>\n    <span class=\"hljs-keyword\">else<\/span>:\n        print(<span class=\"hljs-string\">'Operation method is not defined'<\/span>)\n        Usage()\n\n<span class=\"hljs-comment\"># \u627e\u5230\u6e90\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u56fe\u7247<\/span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def<\/span> <span class=\"hljs-title\">findImage<\/span><span class=\"hljs-params\">(sourceDir)<\/span>:<\/span>\n    <span class=\"hljs-comment\"># \u5982\u679c\u6e90\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u62a5\u9519\u9000\u51fa<\/span>\n    <span class=\"hljs-keyword\">if<\/span> <span class=\"hljs-keyword\">not<\/span> os.path.exists(sourceDir):\n        print(<span class=\"hljs-string\">'Source directory is not defined'<\/span>)\n        Usage()\n    <span class=\"hljs-comment\"># \u5faa\u73af\u76ee\u6807\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6<\/span>\n    <span class=\"hljs-keyword\">for<\/span> fil <span class=\"hljs-keyword\">in<\/span> os.listdir(sourceDir):\n        <span class=\"hljs-comment\"># \u53d6\u5f97\u6587\u4ef6\u7684\u8def\u5f84<\/span>\n        filPath = os.path.join(sourceDir, fil)\n        <span class=\"hljs-comment\"># \u5224\u65ad\u6587\u4ef6\u662f\u5426\u4e3a\u76ee\u5f55<\/span>\n        <span class=\"hljs-keyword\">if<\/span> <span class=\"hljs-keyword\">not<\/span> os.path.isdir(filPath):\n            <span class=\"hljs-comment\"># \u5224\u65ad\u6587\u4ef6\u662f\u5426\u4e3a\u56fe\u7247<\/span>\n            <span class=\"hljs-keyword\">if<\/span> imghdr.what(filPath) != <span class=\"hljs-keyword\">None<\/span>:\n                <span class=\"hljs-comment\"># \u5c06\u56fe\u7247\u63d2\u5165\u9700\u8981\u5904\u7406\u7684\u5217\u8868<\/span>\n                images.append(filPath)\n<span class=\"hljs-comment\"># \u8ba1\u7b97 MD5 \u503c\u51fd\u6570<\/span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def<\/span> <span class=\"hljs-title\">calcMD5<\/span><span class=\"hljs-params\">(filepath)<\/span>:<\/span>\n    <span class=\"hljs-keyword\">with<\/span> open(filepath,<span class=\"hljs-string\">'rb'<\/span>) <span class=\"hljs-keyword\">as<\/span> f:\n        md5obj = hashlib.md5()\n        md5obj.update(f.read())\n        hash = md5obj.hexdigest()\n        <span class=\"hljs-keyword\">return<\/span> hash\n\n<span class=\"hljs-comment\"># \u5904\u7406\u6240\u6709\u56fe\u7247<\/span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def<\/span> <span class=\"hljs-title\">md5img<\/span><span class=\"hljs-params\">(images)<\/span>:<\/span>\n    <span class=\"hljs-comment\"># \u5982\u679c\u76ee\u6807\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u62a5\u9519\u9000\u51fa<\/span>\n    <span class=\"hljs-keyword\">if<\/span> <span class=\"hljs-keyword\">not<\/span> os.path.exists(targetDir):\n        print(<span class=\"hljs-string\">'Target directory is not defined'<\/span>)\n        Usage()\n    <span class=\"hljs-comment\"># \u5faa\u73af\u9700\u8981\u5904\u7406\u7684\u56fe\u7247\u5217\u8868<\/span>\n    <span class=\"hljs-keyword\">for<\/span> img <span class=\"hljs-keyword\">in<\/span> images:\n        <span class=\"hljs-comment\"># \u6839\u636e\u56fe\u7247\u7684\u771f\u5b9e\u540e\u7f00\uff0c\u6765\u786e\u5b9a\u56fe\u7247\u7684\u540e\u7f00\uff0c\u5982\u679c\u662f jpeg \u5219\u6539\u6210 jpg<\/span>\n        postfix = <span class=\"hljs-string\">'jpg'<\/span> <span class=\"hljs-keyword\">if<\/span> imghdr.what(img) == <span class=\"hljs-string\">'jpeg'<\/span> <span class=\"hljs-keyword\">else<\/span> imghdr.what(img)\n        <span class=\"hljs-comment\"># os.rename(img, targetDir + '\/' + calcMD5(img) + '.' + postfix)<\/span>\n        <span class=\"hljs-comment\"># \u6267\u884c\u590d\u5236\u6216\u8005\u79fb\u52a8\u64cd\u4f5c<\/span>\n        <span class=\"hljs-keyword\">if<\/span> operation == <span class=\"hljs-string\">'move'<\/span>:\n            shutil.move(img, targetDir + <span class=\"hljs-string\">'\/'<\/span> + calcMD5(img) + <span class=\"hljs-string\">'.'<\/span> + postfix)\n        <span class=\"hljs-keyword\">elif<\/span> operation == <span class=\"hljs-string\">'copy'<\/span>:\n            shutil.copy(img, targetDir + <span class=\"hljs-string\">'\/'<\/span> + calcMD5(img) + <span class=\"hljs-string\">'.'<\/span> + postfix)\n<span class=\"hljs-comment\"># \u627e\u56fe\u7247<\/span>\nfindImage(sourceDir)\n<span class=\"hljs-comment\"># \u5904\u7406\u56fe\u7247<\/span>\nmd5img(images)\n<span class=\"hljs-comment\"># \u5b8c\u6210<\/span>\nprint(<span class=\"hljs-string\">'Finish'<\/span>)<\/code><\/pre>\n\n\n\n<h2 id=\"\u4ee3\u7801\u8bf4\u660e\">\u4ee3\u7801\u8bf4\u660e<\/h2>\n\n<p>\u9996\u5148\u5462\u662f\u5f15\u7528\u5404\u79cd\u9700\u8981\u7684\u5e93\u3002<code>sys<\/code>\u5e93\u548c<code>os<\/code>\u5e93\u662f\u975e\u5e38\u57fa\u672c\u5e76\u4e14\u5e38\u7528\u7684\u3002\u7136\u540e\u5c31\u662f\u9488\u5bf9\u5404\u4e2a\u9700\u8981\u7684\u529f\u80fd\u70b9\uff0c\u627e\u7684\u4e0d\u540c\u7684\u5e93\uff0c\u8fdb\u884c\u5f15\u5165\u3002<\/p>\n\n<p>\u7136\u540e\uff0c\u8bbe\u5b9a\u4e86\u5404\u79cd\u9ed8\u8ba4\u53c2\u6570\u3002\u9700\u8981\u6e90\u76ee\u5f55\uff0c\u76ee\u6807\u76ee\u5f55\uff0c\u64cd\u4f5c\u65b9\u6cd5\uff0c\u4ee5\u53ca\u56fe\u7247\u5217\u8868\uff0c\u4e00\u4e2a\u7a7a\u7684\u6570\u7ec4\u3002<\/p>\n\n<p><strong>\u5b9a\u4e49\u51fd\u6570<\/strong><\/p>\n\n<p>\u5728 <code>js<\/code> \u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u7684\u662f <code>function<\/code> \u3002\u5728 <code>python<\/code> \u4e2d\uff0c\u7528\u7684\u662f <code>def<\/code>\u3002 \u6211\u73b0\u5728\u8fd8\u4e0d\u77e5\u9053 <code>def<\/code> \u4ee3\u8868\u7684\u662f\u5565\u610f\u601d\uff0c\u5982\u679c\u4f60\u77e5\u9053\uff0c\u5728\u54c1\u8bba\u4e2d\u544a\u8bc9\u6211\u54c8~<\/p>\n\n<p>\u5176\u4ed6\u7684\u5185\u5bb9\uff0c\u9664\u4e86\u683c\u5f0f\u5dee\u5f02\u4ee5\u5916\uff0c\u6211\u611f\u89c9\u548c <code>js<\/code> \u662f\u975e\u5e38\u7c7b\u4f3c\u7684\u3002<\/p>\n\n<p>\u4f46\u662f\uff0c\u5728 <code>js<\/code> \u4e2d\uff0c\u51fd\u6570\u653e\u5728\u54ea\u91cc\u5e76\u4e0d\u4f1a\u5f71\u54cd\u6267\u884c\u3002\u4f46\u662f\u5728 <code>python<\/code> \u4e2d\u5c31\u4e0d\u4e00\u6837\u4e86\u3002\u51fd\u6570\u5fc5\u987b\u5728\u6267\u884c\u7684\u4ee3\u7801\u4e4b\u524d\u5b9a\u4e49\u3002\u5426\u5219\u5c31\u4f1a\u62a5\u9519\u3002<\/p>\n\n<p>\u76ee\u524d\u6211\u8fd8\u6ca1\u6709\u8fdb\u884c\u591a\u6587\u4ef6\u7684\u7f16\u7801\u3002\u5982\u679c\u662f\u8fdb\u884c\u591a\u6587\u4ef6\u7684\u7f16\u7801\u7684\u8bdd\uff0c\u5982\u4f55\u7ec4\u7ec7\u6587\u4ef6\uff0c\u9700\u8981\u6211\u597d\u597d\u7684\u60f3\u4e00\u4e0b\u3002<\/p>\n\n<p><strong>\u7528\u6237\u4f7f\u7528\u8bf4\u660e<\/strong><\/p>\n\n<p>\u9996\u5148\uff0c\u6211\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7528\u6237\u4f7f\u7528\u8bf4\u660e\u7684\u51fd\u6570\u3002\u5185\u5bb9\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u544a\u8bc9\u4f7f\u7528\u8005\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u4f7f\u7528\u65b9\u6cd5\u3002<\/p>\n\n<p>\u7136\u540e\uff0c\u5c31\u662f\u5404\u79cd\u7ec8\u7aef\u5f55\u5165\u7684\u53c2\u6570\u7684\u5224\u65ad\u5904\u7406\uff0c\u6839\u636e\u5f55\u5165\u7684\u53c2\u6570\uff0c\u91cd\u8bbe\u6211\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u662f\u53c2\u6570\u51fa\u9519\u4e86\uff0c\u5219\u9700\u8981\u544a\u8bc9\u7528\u6237\uff0c\u51fa\u9519\u4e86\u3002<\/p>\n\n<p><strong>\u4e09\u5143\u8fd0\u7b97<\/strong><\/p>\n\n<p><code>python<\/code> \u4e2d\u6ca1\u6709\u4e09\u5143\u8fd0\u7b97\uff1f\uff1f\uff1f\u4f46\u662f\u6709\u7c7b\u4f3c\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u53ea\u662f\u8bed\u6cd5\u4e0d\u4e00\u6837\u800c\u5df2\u3002<\/p>\n\n<p>\u6bd4\u5982\u5728 <code>js<\/code> \u4e2d\uff0c\u4e09\u5143\u8fd0\u7b97\u5982\u4e0b:<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-js hljs \">res = a &gt; <span class=\"hljs-number\">5<\/span> ? <span class=\"hljs-number\">0<\/span> : <span class=\"hljs-number\">1<\/span><\/code><\/pre>\n\n<p>\u4f46\u662f\u5728 <code>python<\/code> \u4e2d\u6ca1\u6709\u4e09\u5143\u8fd0\u7b97\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \">res = <span class=\"hljs-number\">0<\/span> <span class=\"hljs-keyword\">if<\/span> a &gt; <span class=\"hljs-number\">5<\/span> <span class=\"hljs-keyword\">else<\/span> <span class=\"hljs-number\">1<\/span><\/code><\/pre>\n\n<p>\u6bd4\u8f83\u602a\u5f02\uff0c\u4f46\u662f\u6bd4\u7167\u7740\uff0c\u4e5f\u662f\u80fd\u5199\u7684\u3002<\/p>\n\n<p><strong>\u5224\u65ad\u4e00\u4e2a\u8def\u5f84\u662f\u5426\u5b58\u5728<\/strong><\/p>\n\n<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>os.path.exists(path)<\/code> \u6765\u5224\u65ad <code>path<\/code> \u8fd9\u4e2a\u8def\u5f84\u662f\u5426\u5b58\u5728\u3002<\/p>\n\n<p><strong>\u627e\u51fa\u6765\u4e00\u4e2a\u8def\u5f84\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u6216\u8005\u76ee\u5f55<\/strong><\/p>\n\n<p><code>os.listdir(path)<\/code> \u5c31\u53ef\u4ee5\u5217\u51fa <code>path<\/code> \u8fd9\u4e2a\u76ee\u5f55\u4e0b\u9762\u6240\u6709\u7684\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u4e86\u3002\u8fd9\u91cc\u5f97\u5230\u7684\u662f\u4e00\u4e2a\u6570\u7ec4\u3002<\/p>\n\n<blockquote>\n  <p>\u6211\u6bd4\u8f83\u4e60\u60ef <code>js<\/code> \u7684\u8bf4\u6cd5\u3002 <code>python<\/code> \u4e2d\u8bf4\u8fd9\u662f\u5217\u8868\u2026\u2026<\/p>\n<\/blockquote>\n\n<p><strong>\u5224\u65ad\u4e00\u4e2a\u6587\u4ef6\u662f\u5426\u4e3a\u56fe\u7247\uff0c\u5982\u679c\u4e3a\u56fe\u7247\uff0c\u5219\u8f93\u51fa\u56fe\u7247\u7684\u7c7b\u578b<\/strong><\/p>\n\n<p>\u8fd9\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u5e93 <code>imghdr<\/code>\uff0c\u6211\u4eec\u5728\u4ee3\u7801\u7684\u5f00\u5934\u5f15\u7528\u8fdb\u6765\u5373\u53ef\u3002<\/p>\n\n<p>\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>imghdr.what(filPath)<\/code> \u6765\u770b\u6587\u4ef6\u662f\u5426\u4e3a\u56fe\u7247\uff0c\u5982\u679c\u8f93\u51fa\u7684\u662f <code>None<\/code> \u5219\u8868\u793a\u4e0d\u662f\u56fe\u7247\u3002\u5982\u679c\u662f\u56fe\u7247\u7684\u8bdd\uff0c\u5219\u4f1a\u8f93\u51fa\u56fe\u7247\u7684\u7c7b\u578b\u3002\u6bd4\u5982 <code>jpg<\/code> \u56fe\u7247\u4f1a\u8f93\u51fa <code>jpeg<\/code> \u8fd9\u6837\u3002<\/p>\n\n\n\n<h2 id=\"\u5176\u4ed6\u5c0f\u7ed3\">\u5176\u4ed6\u5c0f\u7ed3<\/h2>\n\n<p>\u5173\u952e\u662f\u627e\u5230\u5bf9\u5e94\u7684\u5e93\uff0c\u7136\u540e\u770b\u5e93\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002\u76ee\u524d\u6211\u5f88\u4e0d\u719f\u6089\uff0c\u6bd5\u7adf\u662f\u521a\u521a\u5f00\u59cb\u5b66\u3002\u4f46\u662f\u901a\u8fc7 <code>google<\/code> \u641c\u7d22\uff0c\u662f\u53ef\u4ee5\u5f88\u5feb\u627e\u5230\u89e3\u51b3\u5404\u79cd\u95ee\u9898\u7684\u65b9\u6cd5\u7684\u3002<\/p>\n\n<p>\u552f\u4e00\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u9700\u8981\u52a0\u4e0a\u5173\u952e\u8bcd <code>python3<\/code> \u6765\u907f\u514d\u770b\u5230 <code>python2<\/code> \u7684\u5185\u5bb9\u3002\u6211\u5c31\u9047\u5230\u597d\u51e0\u4e2a 2 \u7684\u4ee3\u7801\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u8dd1\u4e0d\u8d77\u6765\u51fa\u9519\u7684\u95ee\u9898\u3002<\/p>\n\n<p>\u5176\u4ed6\u7684\u8bf4\u660e\u6211\u7684\u6ce8\u91ca\u91cc\u9762\u5df2\u7ecf\u8bf4\u5f97\u975e\u5e38\u6e05\u695a\u4e86\u3002<\/p>\n\n<p>\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002<\/p>","markdowncontent":"# Python3 \u521d\u5b66\u5b9e\u8df5\u6848\u4f8b\uff082\uff09\u5c06\u6e90\u76ee\u5f55\u4e2d\u7684\u56fe\u7247\u7528MD5\u91cd\u547d\u540d\u540e\u79fb\u52a8\u6216\u590d\u5236\u5230\u76ee\u6807\u6587\u4ef6\u5939\n\n\u5c1d\u8bd5\u4e86\u4e00\u4e0b\u7528 `python` \u5b9e\u73b0\u4e86\u4e00\u4e2a\u751f\u6210\u5bc6\u7801\u7684\u7a0b\u5e8f\u3002\u611f\u89c9\u8fd8\u662f\u6bd4\u8f83\u597d\u4e0a\u624b\u7684\u3002\u4f46\u662f\u90a3\u4e2a\u7a0b\u5e8f\u8fd8\u662f\u975e\u5e38\u7b80\u5355\u7684\u4e00\u4e2a\u5c0f\u7a0b\u5e8f\u3002\u8fd9\u6b21\u6211\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u66f4\u52a0\u590d\u6742\u7684\u7a0b\u5e8f\uff0c\u5c31\u662f\u6574\u7406\u56fe\u7247\u3002\n\n## \u5217\u51fa\u9700\u6c42\n\n1. \u5c06\u56fe\u7247\u6587\u4ef6\u7528\u56fe\u7247\u7684 `md5` \u503c\u8fdb\u884c\u91cd\u547d\u540d\u3002\n2. \u53ef\u4ee5\u8bbe\u5b9a\u6e90\u76ee\u5f55\n3. \u53ef\u4ee5\u8bbe\u5b9a\u76ee\u6807\u76ee\u5f55\n4. \u53ef\u4ee5\u8bbe\u5b9a\u662f\u79fb\u52a8\uff0c\u8fd8\u662f\u590d\u5236\n5. \u53c2\u6570\u53ef\u4ee5\u7f3a\u7701\n\n\u5217\u51fa\u8fd9\u4e9b\u9700\u6c42\uff0c\u6211\u5f00\u59cb\u8bbe\u8ba1\u6211\u7684\u7a0b\u5e8f\u3002\n\n## \u6700\u7ec8\u5b9e\u73b0\u4ee3\u7801\n\n```python\n#!\/usr\/bin\/env python3\n# -*- coding: UTF-8 -*-\nimport sys\nimport os\n# \u83b7\u53d6\u6587\u4ef6\u7c7b\u578b\u5e93\nimport imghdr\n# MD5\u5e93\nimport hashlib\n# \u6587\u4ef6\u64cd\u4f5c\u5e93\nimport shutil\n\n# \u8bbe\u5b9a\u9ed8\u8ba4\u53c2\u6570\nsourceDir = '.\/'\ntargetDir = '.\/'\noperation = 'move'\nimages = []\n\n# \u7528\u6237\u64cd\u4f5c\u8bf4\u660e\ndef Usage():\n    print('USAGE: md5img [source dir] [target dir] [-m | -c]')\n    sys.exit(0)\n\n# \u6839\u636e\u8f93\u5165\u7684\u53c2\u6570\uff0c\u8fdb\u884c\u4e0d\u540c\u7684\u5904\u7406\nif len(sys.argv) == 1 or len(sys.argv) > 4:\n    Usage()\n\nif len(sys.argv) >= 2:\n    sourceDir = sys.argv[1]\n    targetDir = sys.argv[1]\n\nif len(sys.argv) >= 3:\n    targetDir = sys.argv[2]\n\nif len(sys.argv) == 4:\n    if sys.argv[3] == '-m':\n        operation = 'move'\n    elif sys.argv[3] == '-c':\n        operation = 'copy'\n    else:\n        print('Operation method is not defined')\n        Usage()\n\n# \u627e\u5230\u6e90\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u56fe\u7247\ndef findImage(sourceDir):\n    # \u5982\u679c\u6e90\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u62a5\u9519\u9000\u51fa\n    if not os.path.exists(sourceDir):\n        print('Source directory is not defined')\n        Usage()\n    # \u5faa\u73af\u76ee\u6807\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\n    for fil in os.listdir(sourceDir):\n        # \u53d6\u5f97\u6587\u4ef6\u7684\u8def\u5f84\n        filPath = os.path.join(sourceDir, fil)\n        # \u5224\u65ad\u6587\u4ef6\u662f\u5426\u4e3a\u76ee\u5f55\n        if not os.path.isdir(filPath):\n            # \u5224\u65ad\u6587\u4ef6\u662f\u5426\u4e3a\u56fe\u7247\n            if imghdr.what(filPath) != None:\n                # \u5c06\u56fe\u7247\u63d2\u5165\u9700\u8981\u5904\u7406\u7684\u5217\u8868\n                images.append(filPath)\n# \u8ba1\u7b97 MD5 \u503c\u51fd\u6570\ndef calcMD5(filepath):\n    with open(filepath,'rb') as f:\n        md5obj = hashlib.md5()\n        md5obj.update(f.read())\n        hash = md5obj.hexdigest()\n        return hash\n\n# \u5904\u7406\u6240\u6709\u56fe\u7247\ndef md5img(images):\n    # \u5982\u679c\u76ee\u6807\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u62a5\u9519\u9000\u51fa\n    if not os.path.exists(targetDir):\n        print('Target directory is not defined')\n        Usage()\n    # \u5faa\u73af\u9700\u8981\u5904\u7406\u7684\u56fe\u7247\u5217\u8868\n    for img in images:\n        # \u6839\u636e\u56fe\u7247\u7684\u771f\u5b9e\u540e\u7f00\uff0c\u6765\u786e\u5b9a\u56fe\u7247\u7684\u540e\u7f00\uff0c\u5982\u679c\u662f jpeg \u5219\u6539\u6210 jpg\n        postfix = 'jpg' if imghdr.what(img) == 'jpeg' else imghdr.what(img)\n        # os.rename(img, targetDir + '\/' + calcMD5(img) + '.' + postfix)\n        # \u6267\u884c\u590d\u5236\u6216\u8005\u79fb\u52a8\u64cd\u4f5c\n        if operation == 'move':\n            shutil.move(img, targetDir + '\/' + calcMD5(img) + '.' + postfix)\n        elif operation == 'copy':\n            shutil.copy(img, targetDir + '\/' + calcMD5(img) + '.' + postfix)\n# \u627e\u56fe\u7247\nfindImage(sourceDir)\n# \u5904\u7406\u56fe\u7247\nmd5img(images)\n# \u5b8c\u6210\nprint('Finish')\n```\n\n## \u4ee3\u7801\u8bf4\u660e\n\n\u9996\u5148\u5462\u662f\u5f15\u7528\u5404\u79cd\u9700\u8981\u7684\u5e93\u3002`sys`\u5e93\u548c`os`\u5e93\u662f\u975e\u5e38\u57fa\u672c\u5e76\u4e14\u5e38\u7528\u7684\u3002\u7136\u540e\u5c31\u662f\u9488\u5bf9\u5404\u4e2a\u9700\u8981\u7684\u529f\u80fd\u70b9\uff0c\u627e\u7684\u4e0d\u540c\u7684\u5e93\uff0c\u8fdb\u884c\u5f15\u5165\u3002\n\n\u7136\u540e\uff0c\u8bbe\u5b9a\u4e86\u5404\u79cd\u9ed8\u8ba4\u53c2\u6570\u3002\u9700\u8981\u6e90\u76ee\u5f55\uff0c\u76ee\u6807\u76ee\u5f55\uff0c\u64cd\u4f5c\u65b9\u6cd5\uff0c\u4ee5\u53ca\u56fe\u7247\u5217\u8868\uff0c\u4e00\u4e2a\u7a7a\u7684\u6570\u7ec4\u3002\n\n**\u5b9a\u4e49\u51fd\u6570**\n\n\u5728 `js` \u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u7684\u662f `function` \u3002\u5728 `python` \u4e2d\uff0c\u7528\u7684\u662f `def`\u3002 \u6211\u73b0\u5728\u8fd8\u4e0d\u77e5\u9053 `def` \u4ee3\u8868\u7684\u662f\u5565\u610f\u601d\uff0c\u5982\u679c\u4f60\u77e5\u9053\uff0c\u5728\u54c1\u8bba\u4e2d\u544a\u8bc9\u6211\u54c8~\n\n\u5176\u4ed6\u7684\u5185\u5bb9\uff0c\u9664\u4e86\u683c\u5f0f\u5dee\u5f02\u4ee5\u5916\uff0c\u6211\u611f\u89c9\u548c `js` \u662f\u975e\u5e38\u7c7b\u4f3c\u7684\u3002\n\n\u4f46\u662f\uff0c\u5728 `js` \u4e2d\uff0c\u51fd\u6570\u653e\u5728\u54ea\u91cc\u5e76\u4e0d\u4f1a\u5f71\u54cd\u6267\u884c\u3002\u4f46\u662f\u5728 `python` \u4e2d\u5c31\u4e0d\u4e00\u6837\u4e86\u3002\u51fd\u6570\u5fc5\u987b\u5728\u6267\u884c\u7684\u4ee3\u7801\u4e4b\u524d\u5b9a\u4e49\u3002\u5426\u5219\u5c31\u4f1a\u62a5\u9519\u3002\n\n\u76ee\u524d\u6211\u8fd8\u6ca1\u6709\u8fdb\u884c\u591a\u6587\u4ef6\u7684\u7f16\u7801\u3002\u5982\u679c\u662f\u8fdb\u884c\u591a\u6587\u4ef6\u7684\u7f16\u7801\u7684\u8bdd\uff0c\u5982\u4f55\u7ec4\u7ec7\u6587\u4ef6\uff0c\u9700\u8981\u6211\u597d\u597d\u7684\u60f3\u4e00\u4e0b\u3002\n\n**\u7528\u6237\u4f7f\u7528\u8bf4\u660e**\n\n\u9996\u5148\uff0c\u6211\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7528\u6237\u4f7f\u7528\u8bf4\u660e\u7684\u51fd\u6570\u3002\u5185\u5bb9\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u544a\u8bc9\u4f7f\u7528\u8005\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u4f7f\u7528\u65b9\u6cd5\u3002\n\n\u7136\u540e\uff0c\u5c31\u662f\u5404\u79cd\u7ec8\u7aef\u5f55\u5165\u7684\u53c2\u6570\u7684\u5224\u65ad\u5904\u7406\uff0c\u6839\u636e\u5f55\u5165\u7684\u53c2\u6570\uff0c\u91cd\u8bbe\u6211\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u662f\u53c2\u6570\u51fa\u9519\u4e86\uff0c\u5219\u9700\u8981\u544a\u8bc9\u7528\u6237\uff0c\u51fa\u9519\u4e86\u3002\n\n**\u4e09\u5143\u8fd0\u7b97**\n\n`python` \u4e2d\u6ca1\u6709\u4e09\u5143\u8fd0\u7b97\uff1f\uff1f\uff1f\u4f46\u662f\u6709\u7c7b\u4f3c\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u53ea\u662f\u8bed\u6cd5\u4e0d\u4e00\u6837\u800c\u5df2\u3002\n\n\u6bd4\u5982\u5728 `js` \u4e2d\uff0c\u4e09\u5143\u8fd0\u7b97\u5982\u4e0b:\n\n```js\nres = a > 5 ? 0 : 1\n```\n\n\u4f46\u662f\u5728 `python` \u4e2d\u6ca1\u6709\u4e09\u5143\u8fd0\u7b97\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a\n\n```python\nres = 0 if a > 5 else 1\n```\n\n\u6bd4\u8f83\u602a\u5f02\uff0c\u4f46\u662f\u6bd4\u7167\u7740\uff0c\u4e5f\u662f\u80fd\u5199\u7684\u3002\n\n**\u5224\u65ad\u4e00\u4e2a\u8def\u5f84\u662f\u5426\u5b58\u5728**\n\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 `os.path.exists(path)` \u6765\u5224\u65ad `path` \u8fd9\u4e2a\u8def\u5f84\u662f\u5426\u5b58\u5728\u3002\n\n**\u627e\u51fa\u6765\u4e00\u4e2a\u8def\u5f84\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u6216\u8005\u76ee\u5f55**\n\n`os.listdir(path)` \u5c31\u53ef\u4ee5\u5217\u51fa `path` \u8fd9\u4e2a\u76ee\u5f55\u4e0b\u9762\u6240\u6709\u7684\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u4e86\u3002\u8fd9\u91cc\u5f97\u5230\u7684\u662f\u4e00\u4e2a\u6570\u7ec4\u3002\n\n> \u6211\u6bd4\u8f83\u4e60\u60ef `js` \u7684\u8bf4\u6cd5\u3002 `python` \u4e2d\u8bf4\u8fd9\u662f\u5217\u8868\u2026\u2026\n\n**\u5224\u65ad\u4e00\u4e2a\u6587\u4ef6\u662f\u5426\u4e3a\u56fe\u7247\uff0c\u5982\u679c\u4e3a\u56fe\u7247\uff0c\u5219\u8f93\u51fa\u56fe\u7247\u7684\u7c7b\u578b**\n\n\u8fd9\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u5e93 `imghdr`\uff0c\u6211\u4eec\u5728\u4ee3\u7801\u7684\u5f00\u5934\u5f15\u7528\u8fdb\u6765\u5373\u53ef\u3002\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 `imghdr.what(filPath)` \u6765\u770b\u6587\u4ef6\u662f\u5426\u4e3a\u56fe\u7247\uff0c\u5982\u679c\u8f93\u51fa\u7684\u662f `None` \u5219\u8868\u793a\u4e0d\u662f\u56fe\u7247\u3002\u5982\u679c\u662f\u56fe\u7247\u7684\u8bdd\uff0c\u5219\u4f1a\u8f93\u51fa\u56fe\u7247\u7684\u7c7b\u578b\u3002\u6bd4\u5982 `jpg` \u56fe\u7247\u4f1a\u8f93\u51fa `jpeg` \u8fd9\u6837\u3002\n\n\n## \u5176\u4ed6\u5c0f\u7ed3\n\n\u5173\u952e\u662f\u627e\u5230\u5bf9\u5e94\u7684\u5e93\uff0c\u7136\u540e\u770b\u5e93\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002\u76ee\u524d\u6211\u5f88\u4e0d\u719f\u6089\uff0c\u6bd5\u7adf\u662f\u521a\u521a\u5f00\u59cb\u5b66\u3002\u4f46\u662f\u901a\u8fc7 `google` \u641c\u7d22\uff0c\u662f\u53ef\u4ee5\u5f88\u5feb\u627e\u5230\u89e3\u51b3\u5404\u79cd\u95ee\u9898\u7684\u65b9\u6cd5\u7684\u3002\n\n\u552f\u4e00\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u9700\u8981\u52a0\u4e0a\u5173\u952e\u8bcd `python3` \u6765\u907f\u514d\u770b\u5230 `python2` \u7684\u5185\u5bb9\u3002\u6211\u5c31\u9047\u5230\u597d\u51e0\u4e2a 2 \u7684\u4ee3\u7801\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u8dd1\u4e0d\u8d77\u6765\u51fa\u9519\u7684\u95ee\u9898\u3002\n\n\u5176\u4ed6\u7684\u8bf4\u660e\u6211\u7684\u6ce8\u91ca\u91cc\u9762\u5df2\u7ecf\u8bf4\u5f97\u975e\u5e38\u6e05\u695a\u4e86\u3002\n\n\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002\n\n","private":0,"tags":"python,\u56fe\u7247,md5","categories":"python3","channel":"16","type":"original","status":1},"error":"","status":true}