{"data":{"id":"80841241","title":"React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6","articleedittype":1,"description":"React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6\n\n\u6211\u4eec\u7684\u9879\u76ee\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u662f\u9700\u8981\u548c\u670d\u52a1\u7aef\u8fdb\u884c\u4ea4\u4e92\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6\uff0c\u8fd9\u91cc\uff0c\u6211\u4eec\u7684\u63a5\u53e3\u8c03\u7528\uff0c\u6309\u7167\u8001\u4e60\u60ef\uff0c\u8fd8\u662f\u8bf7\u6c42 cnodejs.org \u63d0\u4f9b\u7684\u516c\u7528\u63a5\u53e3\u3002\u63a5\u53e3\u6587\u6863\u67e5\u770b\uff0c\u8bf7\u70b9\u51fb https:\/\/cnodejs.org\/api\n\n\n\n\u914d\u7f6e\u4ee3\u7406\n\nreact \u7684\u4ee3\u7406\u914d\u7f6e\u76f8\u6bd4 vue \u7684\u914d\u7f6e\uff0c\u8981\u7b80...","content":"<h1 id=\"react-webpack-\u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\u4e94\u914d\u7f6e-api-\u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6<\/h1>\n\n\n\n<h2 id=\"react-\u5165\u95e8\u7cfb\u5217\u6559\u7a0b\u5bfc\u822a\">React \u5165\u95e8\u7cfb\u5217\u6559\u7a0b\u5bfc\u822a<\/h2>\n\n<p><a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841159\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e00\uff09\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841181\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e8c\uff09\u521b\u5efa\u9879\u76ee<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841200\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e09\uff09\u76ee\u5f55\u8bf4\u660e\u4ee5\u53ca\u8c03\u6574\u9879\u76ee\u6784\u67b6\u6587\u4ef6<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841220\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u56db\uff09\u8c03\u6574\u9879\u76ee\u6587\u4ef6\u4ee5\u53ca\u9879\u76ee\u914d\u7f6e<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841241\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841255\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516d\uff09\u6e32\u67d3\u4e00\u4e2a\u5217\u8868\uff0c\u521d\u8bc6 jsx \u6587\u4ef6<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841263\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e03\uff09jsx \u7ec4\u4ef6\u4e2d\u8c03\u7528\u7ec4\u4ef6\u3001\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u503c<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841274\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516b\uff09Link \u8df3\u8f6c\u4ee5\u53ca\u7f16\u5199\u5185\u5bb9\u9875\u9762<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841290\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e5d\uff09\u5b50\u7ec4\u4ef6\u7ed9\u7236\u7ec4\u4ef6\u4f20\u503c<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841296\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\uff09\u5728 jsx \u548c scss \u4e2d\u4f7f\u7528\u56fe\u7247<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841308\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c<\/a><\/p>\n\n<hr>\n\n<p>\u6211\u4eec\u7684\u9879\u76ee\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u662f\u9700\u8981\u548c\u670d\u52a1\u7aef\u8fdb\u884c\u4ea4\u4e92\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6\uff0c\u8fd9\u91cc\uff0c\u6211\u4eec\u7684\u63a5\u53e3\u8c03\u7528\uff0c\u6309\u7167\u8001\u4e60\u60ef\uff0c\u8fd8\u662f\u8bf7\u6c42 cnodejs.org \u63d0\u4f9b\u7684\u516c\u7528\u63a5\u53e3\u3002\u63a5\u53e3\u6587\u6863\u67e5\u770b\uff0c\u8bf7\u70b9\u51fb <a href=\"https:\/\/cnodejs.org\/api\">https:\/\/cnodejs.org\/api<\/a><\/p>\n\n<h2 id=\"\u914d\u7f6e\u4ee3\u7406\">\u914d\u7f6e\u4ee3\u7406<\/h2>\n\n<p><code>react<\/code> \u7684\u4ee3\u7406\u914d\u7f6e\u76f8\u6bd4 <code>vue<\/code> \u7684\u914d\u7f6e\uff0c\u8981\u7b80\u5355\u5f88\u591a\u3002<\/p>\n\n<p>\u6211\u4eec\u6253\u5f00 <code>package.json<\/code> \u6587\u4ef6\uff0c\u5728\u6700\u4e0b\u9762\u52a0\u4e0a<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-json hljs \">,\n<span class=\"hljs-string\">\"proxy\"<\/span>: <span class=\"hljs-string\">\"https:\/\/cnodejs.org\/\"<\/span><\/code><\/pre>\n\n<p><img src=\"https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/fc\/0d7c95a9f7558a0e9d7e9f2249c7ed.jpg\" alt=\"\" title=\"\"><\/p>\n\n<p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5c31\u914d\u7f6e\u597d\u4e86\u3002<\/p>\n\n<p>\u6ce8\u610f\uff0c\u914d\u7f6e\u4e86\u4ee3\u7406\u4e4b\u540e\uff0c\u6211\u4eec\u7684\u9879\u76ee\u9700\u8981\u91cd\u542f\uff0c\u624d\u80fd\u751f\u6548\u3002\u6211\u4eec\u7528 <code>command + c<\/code> \u505c\u6b62\u8fd0\u884c\uff0c\u7136\u540e\u518d\u8f93\u5165 <code>npm start<\/code> \u91cd\u65b0\u8fd0\u884c\u9879\u76ee\u3002<\/p>\n\n<blockquote>\n  <p>linux \u548c windows \u662f ctrl + c \u505c\u6b62\u7ec8\u7aef\u8fd0\u884c\u3002<\/p>\n<\/blockquote>\n\n\n\n<h2 id=\"\u914d\u7f6e-toolapijs-\u6587\u4ef6\">\u914d\u7f6e tool\/api.js \u6587\u4ef6<\/h2>\n\n<p>\u6211\u4eec\u5c06\u6211\u4eec\u7684\u63a5\u53e3\u8bf7\u6c42\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u4e8e <code>tool\/api.js<\/code> \u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u6211\u4eec\u586b\u5199\u4ee5\u4e0b\u5185\u5bb9\uff1a<\/p>\n\n<blockquote>\n  <p>\u867d\u7136\u8fd9\u4e2a\u6587\u4ef6\u6bd4\u8f83\u957f\uff0c\u4f46\u662f\u8fd8\u8bf7\u4ed4\u7ec6\u7814\u7a76\u4e00\u4e0b\uff0c\u786e\u4fdd\u641e\u61c2\u3002<\/p>\n<\/blockquote>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-js hljs \"><span class=\"hljs-keyword\">var<\/span> root = <span class=\"hljs-string\">'\/api\/v1'<\/span>\n<span class=\"hljs-keyword\">var<\/span> request = <span class=\"hljs-built_in\">require<\/span>(<span class=\"hljs-string\">'superagent'<\/span>)\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-title\">dataType<\/span><span class=\"hljs-params\">(data)<\/span> {<\/span> <span class=\"hljs-comment\">\/\/ \u83b7\u53d6\u6570\u636e\u7c7b\u578b<\/span>\n  <span class=\"hljs-keyword\">return<\/span> ({}).toString.call(data).match(<span class=\"hljs-regexp\">\/\\s([a-zA-Z]+)\/<\/span>)[<span class=\"hljs-number\">1<\/span>].toLowerCase()\n}\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-title\">filterNull<\/span><span class=\"hljs-params\">(o)<\/span> {<\/span> <span class=\"hljs-comment\">\/\/ \u8fc7\u6ee4\u503c\u4e3anull\u7684\u8bf7\u6c42\u53c2\u6570\u6570\u636e<\/span>\n  <span class=\"hljs-keyword\">for<\/span> (<span class=\"hljs-keyword\">var<\/span> key <span class=\"hljs-keyword\">in<\/span> o) {\n    <span class=\"hljs-keyword\">if<\/span> (o[key] === <span class=\"hljs-literal\">null<\/span>) {\n      <span class=\"hljs-keyword\">delete<\/span> o[key]\n    }\n    <span class=\"hljs-keyword\">if<\/span> (dataType(o[key]) === <span class=\"hljs-string\">'string'<\/span>) {\n      o[key] = o[key].trim()\n      <span class=\"hljs-keyword\">if<\/span> (key === <span class=\"hljs-string\">'asset_id'<\/span>) {\n        o[key] = +o[key]\n      }\n      <span class=\"hljs-keyword\">if<\/span> (o[key].length === <span class=\"hljs-number\">0<\/span>) {\n        <span class=\"hljs-keyword\">delete<\/span> o[key]\n      }\n    } <span class=\"hljs-keyword\">else<\/span> <span class=\"hljs-keyword\">if<\/span> (dataType(o[key]) === <span class=\"hljs-string\">'object'<\/span>) {\n      o[key] = filterNull(o[key])\n    } <span class=\"hljs-keyword\">else<\/span> <span class=\"hljs-keyword\">if<\/span> (dataType(o[key]) === <span class=\"hljs-string\">'array'<\/span>) {\n      o[key] = filterNull(o[key])\n    }\n  }\n  <span class=\"hljs-keyword\">return<\/span> o\n}\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-title\">ajaxAgent<\/span><span class=\"hljs-params\">(method, url, params, success, failure)<\/span> {<\/span> <span class=\"hljs-comment\">\/\/ \u53d1\u9001\u8bf7\u6c42\u5e76\u5f97\u5230\u54cd\u5e94<\/span>\n  <span class=\"hljs-keyword\">if<\/span> (!navigator.onLine) {\n    <span class=\"hljs-keyword\">return<\/span>\n  }\n  <span class=\"hljs-keyword\">var<\/span> r = request(method, url).type(<span class=\"hljs-string\">'application\/json'<\/span>).withCredentials()\n  <span class=\"hljs-keyword\">if<\/span> (params) {\n    params = filterNull(params)\n    <span class=\"hljs-keyword\">if<\/span> (method === <span class=\"hljs-string\">'POST'<\/span> || method === <span class=\"hljs-string\">'PUT'<\/span>) {\n      <span class=\"hljs-keyword\">if<\/span> (dataType(params) === <span class=\"hljs-string\">'object'<\/span>) {\n        params = <span class=\"hljs-built_in\">JSON<\/span>.stringify(params)\n      }\n      r = r.send(params)\n    } <span class=\"hljs-keyword\">else<\/span> <span class=\"hljs-keyword\">if<\/span> (method === <span class=\"hljs-string\">'GET'<\/span> || method === <span class=\"hljs-string\">'DELETE'<\/span>) {\n      r = r.query(params)\n    }\n  }\n  r.end(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-params\">(err, response)<\/span> {<\/span>\n    <span class=\"hljs-keyword\">if<\/span> (err) {\n      <span class=\"hljs-keyword\">if<\/span> (failure) {\n        failure({ data: err.name + <span class=\"hljs-string\">': '<\/span> + err.message, http_status: response.status }, response, <span class=\"hljs-string\">'HTTP_ERROR'<\/span>) <span class=\"hljs-comment\">\/\/ err, res, esta<\/span>\n      } <span class=\"hljs-keyword\">else<\/span> {\n        console.log(<span class=\"hljs-string\">'\u7f51\u7edc\u8fde\u63a5\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5'<\/span>)\n      }\n    } <span class=\"hljs-keyword\">else<\/span> {\n      <span class=\"hljs-comment\">\/\/ \u8fd9\u91cc\u7684\u5224\u65ad\u6761\u4ef6\uff0c\u9700\u8981\u548c\u540e\u7aef\u8fdb\u884c\u786e\u8ba4\uff0c\u8fd9\u91cc\u4f7f\u7528\u7684\u662f cnodejs.org \u7684\u89c4\u5219<\/span>\n      <span class=\"hljs-keyword\">if<\/span> (response.body.success === <span class=\"hljs-literal\">true<\/span>) {\n        <span class=\"hljs-keyword\">if<\/span> (success) {\n          success(response.body, response) <span class=\"hljs-comment\">\/\/ rdata, res<\/span>\n        }\n      } <span class=\"hljs-keyword\">else<\/span> {\n        <span class=\"hljs-keyword\">if<\/span> (failure) {\n          failure(response.body, response, <span class=\"hljs-string\">'STATUS_ERROR'<\/span>) <span class=\"hljs-comment\">\/\/ err:, res, esta<\/span>\n        } <span class=\"hljs-keyword\">else<\/span> {\n          console.log(response.body.return_msg)\n        }\n      }\n    }\n  })\n}\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-title\">testRequestParams<\/span><span class=\"hljs-params\">(method, url, params, success, failure)<\/span> {<\/span> <span class=\"hljs-comment\">\/\/ \u9a8c\u8bc1\u8bf7\u6c42\u65f6\uff0c\u4f20\u9012\u7684\u53c2\u6570<\/span>\n  <span class=\"hljs-keyword\">if<\/span> (<span class=\"hljs-built_in\">Object<\/span>.prototype.toString.call(success) !== <span class=\"hljs-string\">'[object Function]'<\/span>) {\n    <span class=\"hljs-keyword\">try<\/span> {\n      <span class=\"hljs-keyword\">throw<\/span> <span class=\"hljs-keyword\">new<\/span> <span class=\"hljs-built_in\">Error<\/span>(<span class=\"hljs-string\">'\u6210\u529f\u7684\u56de\u8c03\u51fd\u6570\u4f4d\u7f6e\u63a5\u53d7\u7684\u662f\u4e00\u4e2aFunction,\u4f46\u662f\u5374\u5f97\u5230\u4e00\u4e2a'<\/span> + dataType(success))\n    } <span class=\"hljs-keyword\">catch<\/span> (e) {\n      console.error(e)\n      <span class=\"hljs-keyword\">return<\/span>\n    }\n  }\n  <span class=\"hljs-keyword\">if<\/span> (failure) {\n    <span class=\"hljs-keyword\">if<\/span> (<span class=\"hljs-built_in\">Object<\/span>.prototype.toString.call(failure) !== <span class=\"hljs-string\">'[object Function]'<\/span>) {\n      <span class=\"hljs-keyword\">try<\/span> {\n        <span class=\"hljs-keyword\">throw<\/span> <span class=\"hljs-keyword\">new<\/span> <span class=\"hljs-built_in\">Error<\/span>(<span class=\"hljs-string\">'\u5931\u8d25\u7684\u56de\u8c03\u51fd\u6570\u4f4d\u7f6e\u63a5\u53d7\u7684\u662f\u4e00\u4e2aFunction,\u4f46\u662f\u5374\u5f97\u5230\u4e00\u4e2a'<\/span> + dataType(failure))\n      } <span class=\"hljs-keyword\">catch<\/span> (e) {\n        console.error(e)\n        <span class=\"hljs-keyword\">return<\/span>\n      }\n    }\n  }\n  <span class=\"hljs-keyword\">if<\/span> (<span class=\"hljs-built_in\">Object<\/span>.prototype.toString.call(params) === <span class=\"hljs-string\">'[object Object]'<\/span> || params === <span class=\"hljs-literal\">null<\/span>) {\n    <span class=\"hljs-keyword\">return<\/span> ajaxAgent(method, url, params, success, failure)\n  } <span class=\"hljs-keyword\">else<\/span> {\n    <span class=\"hljs-keyword\">try<\/span> {\n      <span class=\"hljs-keyword\">throw<\/span> <span class=\"hljs-keyword\">new<\/span> <span class=\"hljs-built_in\">Error<\/span>(<span class=\"hljs-string\">'\u63a5\u53d7\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u6216\u8005\u4e3a\u7a7a(\u5373null),\u4f46\u662f\u5374\u5f97\u5230\u4e00\u4e2a'<\/span> + dataType(params))\n    } <span class=\"hljs-keyword\">catch<\/span> (e) {\n      console.error(e)\n    }\n  }\n}\nexport <span class=\"hljs-keyword\">default<\/span> {\n  get: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-params\">(url, params, success, failure)<\/span> {<\/span>\n    testRequestParams(<span class=\"hljs-string\">'GET'<\/span>, root + <span class=\"hljs-string\">'\/'<\/span> + url, params, success, failure)\n  },\n  post: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-params\">(url, params, success, failure)<\/span> {<\/span>\n    testRequestParams(<span class=\"hljs-string\">'POST'<\/span>, root + <span class=\"hljs-string\">'\/'<\/span> + url, params, success, failure)\n  },\n  put: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-params\">(url, params, success, failure)<\/span> {<\/span>\n    testRequestParams(<span class=\"hljs-string\">'PUT'<\/span>, root + <span class=\"hljs-string\">'\/'<\/span> + url, params, success, failure)\n  },\n  <span class=\"hljs-keyword\">delete<\/span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-params\">(url, params, success, failure)<\/span> {<\/span>\n    testRequestParams(<span class=\"hljs-string\">'DELETE'<\/span>, root + <span class=\"hljs-string\">'\/'<\/span> + url, params, success, failure)\n  },\n  root() {\n    <span class=\"hljs-keyword\">return<\/span> root\n  },\n  filterNull\n}\n<\/code><\/pre>\n\n<p>\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 <code>superagent<\/code> \u8fd9\u4e2a\u63a5\u53e3\u8bf7\u6c42\u5de5\u5177\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5b89\u88c5\u8fd9\u4e2a\u8fd9\u4e2a\u5de5\u5177\uff1a<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-shell hljs coffeescript\"><span class=\"hljs-built_in\">npm<\/span> i superagent<\/code><\/pre>\n\n\n\n<h2 id=\"\u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u6b63\u5e38\">\u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u6b63\u5e38<\/h2>\n\n<p>\u6211\u4eec\u7684\u914d\u7f6e\u6587\u4ef6\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\uff0c\u6211\u4eec\u7f16\u8f91 <code>page\/site\/index.jsx<\/code> \u8fd9\u4e2a\u6587\u4ef6\uff0c\u5728\u91cc\u9762\u5c1d\u8bd5\u8bf7\u6c42\u4e00\u4e0b\uff0c\u770b\u770b\u662f\u5426\u80fd\u591f\u8bf7\u6c42\u5230\u6570\u636e\u3002<\/p>\n\n<p>\u5185\u5bb9\u5982\u4e0b\uff1a<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-js hljs \">import React, { Component } from <span class=\"hljs-string\">'react'<\/span>\nimport Api from <span class=\"hljs-string\">'@\/tool\/api.js'<\/span>\n\nexport <span class=\"hljs-keyword\">default<\/span> <span class=\"hljs-keyword\">class<\/span> Index extends Component {\n  constructor (props) {\n    super(props)\n    <span class=\"hljs-keyword\">this<\/span>.state = {}\n  }\n\n  componentDidMount () {\n    Api.get(<span class=\"hljs-string\">'topics'<\/span>, <span class=\"hljs-literal\">null<\/span>, r =&gt; {\n      console.log(r)\n    })\n  }\n\n  render () {\n    <span class=\"hljs-keyword\">return<\/span> (\n      <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div<\/span> <span class=\"hljs-attribute\">className<\/span>=<span class=\"hljs-value\">\"outer home\"<\/span>&gt;<\/span>\n        indexPage\n      <span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">div<\/span>&gt;<\/span>\n    )\n  }\n}<\/span><\/code><\/pre>\n\n<p>\u6839\u636e\u8fd9\u6bb5\u4ee3\u7801\uff0c\u63a7\u5236\u53f0\u6309\u7167\u6211\u4eec\u7684\u9700\u8981\uff0c\u6253\u5370\u51fa\u4e86\u4ee5\u4e0b\u5185\u5bb9\u3002\u8bf4\u660e\u6211\u4eec\u7684\u914d\u7f6e\u6210\u529f\u4e86\u3002<\/p>\n\n<p><img src=\"https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/79\/04350f07343578c34a7006e40f894f.jpg\" alt=\"\" title=\"\"><\/p>\n\n<blockquote>\n  <p><code>componentDidMount<\/code> \u662f\u8bf4\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u6267\u884c\uff0c\u66f4\u591a\u5185\u5bb9\uff0c\u8bf7\u641c\u7d22 <strong>react \u751f\u547d\u5468\u671f<\/strong> \u67e5\u770b\u76f8\u5173\u5185\u5bb9\u3002<\/p>\n  \n  <p>\u5982\u679c\u662f\u521d\u6b21\u63a5\u89e6 react \u80af\u5b9a\u5bf9\u4e0a\u9762\u7684\u4ee3\u7801\u4e91\u91cc\u96fe\u91cc\uff0c\u4e0d\u77e5\u6240\u4e91\u3002\u4f46\u662f\uff0c\u8fd9\u6839\u672c\u5c31\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f\u9879\u76ee\u8dd1\u8d77\u6765\uff0c\u8dd1\u8d77\u6765\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6162\u6162\u7684\u628a\u8fd9\u4e9b\u672a\u77e5\u7684\u95ee\u9898\u5168\u90e8\u641e\u5b9a\u3002\u4e34\u6e0a\u7fa1\u9c7c\u4e0d\u5982\u9000\u800c\u7ed3\u7f51\u3002\u7ad9\u5728\u6cb3\u8fb9\u662f\u5b66\u4e0d\u4f1a\u6e38\u6cf3\u7684\u3002<\/p>\n  \n  <p>\u73b0\u5728\u4f60\u8981\u505a\u7684\u5c31\u662f\uff0c\u590d\u5236\uff0c\u7c98\u8d34\uff0c\u8dd1\u8d77\u6765\uff0c\u6210\u529f\u4e86\uff0c\u6b27\u8036\uff01<\/p>\n<\/blockquote>\n\n<p>\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002<\/p>","markdowncontent":"# React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6\n\n\n## React \u5165\u95e8\u7cfb\u5217\u6559\u7a0b\u5bfc\u822a\n\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e00\uff09\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841159)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e8c\uff09\u521b\u5efa\u9879\u76ee](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841181)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e09\uff09\u76ee\u5f55\u8bf4\u660e\u4ee5\u53ca\u8c03\u6574\u9879\u76ee\u6784\u67b6\u6587\u4ef6](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841200)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u56db\uff09\u8c03\u6574\u9879\u76ee\u6587\u4ef6\u4ee5\u53ca\u9879\u76ee\u914d\u7f6e](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841220)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841241)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516d\uff09\u6e32\u67d3\u4e00\u4e2a\u5217\u8868\uff0c\u521d\u8bc6 jsx \u6587\u4ef6](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841255)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e03\uff09jsx \u7ec4\u4ef6\u4e2d\u8c03\u7528\u7ec4\u4ef6\u3001\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u503c](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841263)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516b\uff09Link \u8df3\u8f6c\u4ee5\u53ca\u7f16\u5199\u5185\u5bb9\u9875\u9762](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841274)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e5d\uff09\u5b50\u7ec4\u4ef6\u7ed9\u7236\u7ec4\u4ef6\u4f20\u503c](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841290)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\uff09\u5728 jsx \u548c scss \u4e2d\u4f7f\u7528\u56fe\u7247](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841296)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841308)\n\n****\n\n\u6211\u4eec\u7684\u9879\u76ee\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u662f\u9700\u8981\u548c\u670d\u52a1\u7aef\u8fdb\u884c\u4ea4\u4e92\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6\uff0c\u8fd9\u91cc\uff0c\u6211\u4eec\u7684\u63a5\u53e3\u8c03\u7528\uff0c\u6309\u7167\u8001\u4e60\u60ef\uff0c\u8fd8\u662f\u8bf7\u6c42 cnodejs.org \u63d0\u4f9b\u7684\u516c\u7528\u63a5\u53e3\u3002\u63a5\u53e3\u6587\u6863\u67e5\u770b\uff0c\u8bf7\u70b9\u51fb https:\/\/cnodejs.org\/api\n\n## \u914d\u7f6e\u4ee3\u7406\n\n`react` \u7684\u4ee3\u7406\u914d\u7f6e\u76f8\u6bd4 `vue` \u7684\u914d\u7f6e\uff0c\u8981\u7b80\u5355\u5f88\u591a\u3002\n\n\u6211\u4eec\u6253\u5f00 `package.json` \u6587\u4ef6\uff0c\u5728\u6700\u4e0b\u9762\u52a0\u4e0a\n\n```json\n,\n\"proxy\": \"https:\/\/cnodejs.org\/\"\n```\n![](https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/fc\/0d7c95a9f7558a0e9d7e9f2249c7ed.jpg)\n\n\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5c31\u914d\u7f6e\u597d\u4e86\u3002\n\n\u6ce8\u610f\uff0c\u914d\u7f6e\u4e86\u4ee3\u7406\u4e4b\u540e\uff0c\u6211\u4eec\u7684\u9879\u76ee\u9700\u8981\u91cd\u542f\uff0c\u624d\u80fd\u751f\u6548\u3002\u6211\u4eec\u7528 `command + c` \u505c\u6b62\u8fd0\u884c\uff0c\u7136\u540e\u518d\u8f93\u5165 `npm start` \u91cd\u65b0\u8fd0\u884c\u9879\u76ee\u3002\n\n> linux \u548c windows \u662f ctrl + c \u505c\u6b62\u7ec8\u7aef\u8fd0\u884c\u3002\n\n## \u914d\u7f6e tool\/api.js \u6587\u4ef6\n\n\u6211\u4eec\u5c06\u6211\u4eec\u7684\u63a5\u53e3\u8bf7\u6c42\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u4e8e `tool\/api.js` \u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u6211\u4eec\u586b\u5199\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n> \u867d\u7136\u8fd9\u4e2a\u6587\u4ef6\u6bd4\u8f83\u957f\uff0c\u4f46\u662f\u8fd8\u8bf7\u4ed4\u7ec6\u7814\u7a76\u4e00\u4e0b\uff0c\u786e\u4fdd\u641e\u61c2\u3002\n\n```js\nvar root = '\/api\/v1'\nvar request = require('superagent')\nfunction dataType(data) { \/\/ \u83b7\u53d6\u6570\u636e\u7c7b\u578b\n  return ({}).toString.call(data).match(\/\\s([a-zA-Z]+)\/)[1].toLowerCase()\n}\nfunction filterNull(o) { \/\/ \u8fc7\u6ee4\u503c\u4e3anull\u7684\u8bf7\u6c42\u53c2\u6570\u6570\u636e\n  for (var key in o) {\n    if (o[key] === null) {\n      delete o[key]\n    }\n    if (dataType(o[key]) === 'string') {\n      o[key] = o[key].trim()\n      if (key === 'asset_id') {\n        o[key] = +o[key]\n      }\n      if (o[key].length === 0) {\n        delete o[key]\n      }\n    } else if (dataType(o[key]) === 'object') {\n      o[key] = filterNull(o[key])\n    } else if (dataType(o[key]) === 'array') {\n      o[key] = filterNull(o[key])\n    }\n  }\n  return o\n}\nfunction ajaxAgent(method, url, params, success, failure) { \/\/ \u53d1\u9001\u8bf7\u6c42\u5e76\u5f97\u5230\u54cd\u5e94\n  if (!navigator.onLine) {\n    return\n  }\n  var r = request(method, url).type('application\/json').withCredentials()\n  if (params) {\n    params = filterNull(params)\n    if (method === 'POST' || method === 'PUT') {\n      if (dataType(params) === 'object') {\n        params = JSON.stringify(params)\n      }\n      r = r.send(params)\n    } else if (method === 'GET' || method === 'DELETE') {\n      r = r.query(params)\n    }\n  }\n  r.end(function (err, response) {\n    if (err) {\n      if (failure) {\n        failure({ data: err.name + ': ' + err.message, http_status: response.status }, response, 'HTTP_ERROR') \/\/ err, res, esta\n      } else {\n        console.log('\u7f51\u7edc\u8fde\u63a5\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5')\n      }\n    } else {\n      \/\/ \u8fd9\u91cc\u7684\u5224\u65ad\u6761\u4ef6\uff0c\u9700\u8981\u548c\u540e\u7aef\u8fdb\u884c\u786e\u8ba4\uff0c\u8fd9\u91cc\u4f7f\u7528\u7684\u662f cnodejs.org \u7684\u89c4\u5219\n      if (response.body.success === true) {\n        if (success) {\n          success(response.body, response) \/\/ rdata, res\n        }\n      } else {\n        if (failure) {\n          failure(response.body, response, 'STATUS_ERROR') \/\/ err:, res, esta\n        } else {\n          console.log(response.body.return_msg)\n        }\n      }\n    }\n  })\n}\nfunction testRequestParams(method, url, params, success, failure) { \/\/ \u9a8c\u8bc1\u8bf7\u6c42\u65f6\uff0c\u4f20\u9012\u7684\u53c2\u6570\n  if (Object.prototype.toString.call(success) !== '[object Function]') {\n    try {\n      throw new Error('\u6210\u529f\u7684\u56de\u8c03\u51fd\u6570\u4f4d\u7f6e\u63a5\u53d7\u7684\u662f\u4e00\u4e2aFunction,\u4f46\u662f\u5374\u5f97\u5230\u4e00\u4e2a' + dataType(success))\n    } catch (e) {\n      console.error(e)\n      return\n    }\n  }\n  if (failure) {\n    if (Object.prototype.toString.call(failure) !== '[object Function]') {\n      try {\n        throw new Error('\u5931\u8d25\u7684\u56de\u8c03\u51fd\u6570\u4f4d\u7f6e\u63a5\u53d7\u7684\u662f\u4e00\u4e2aFunction,\u4f46\u662f\u5374\u5f97\u5230\u4e00\u4e2a' + dataType(failure))\n      } catch (e) {\n        console.error(e)\n        return\n      }\n    }\n  }\n  if (Object.prototype.toString.call(params) === '[object Object]' || params === null) {\n    return ajaxAgent(method, url, params, success, failure)\n  } else {\n    try {\n      throw new Error('\u63a5\u53d7\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u6216\u8005\u4e3a\u7a7a(\u5373null),\u4f46\u662f\u5374\u5f97\u5230\u4e00\u4e2a' + dataType(params))\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\nexport default {\n  get: function (url, params, success, failure) {\n    testRequestParams('GET', root + '\/' + url, params, success, failure)\n  },\n  post: function (url, params, success, failure) {\n    testRequestParams('POST', root + '\/' + url, params, success, failure)\n  },\n  put: function (url, params, success, failure) {\n    testRequestParams('PUT', root + '\/' + url, params, success, failure)\n  },\n  delete: function (url, params, success, failure) {\n    testRequestParams('DELETE', root + '\/' + url, params, success, failure)\n  },\n  root() {\n    return root\n  },\n  filterNull\n}\n\n```\n\n\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 `superagent` \u8fd9\u4e2a\u63a5\u53e3\u8bf7\u6c42\u5de5\u5177\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5b89\u88c5\u8fd9\u4e2a\u8fd9\u4e2a\u5de5\u5177\uff1a\n\n```shell\nnpm i superagent\n```\n\n## \u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u6b63\u5e38\n\n\u6211\u4eec\u7684\u914d\u7f6e\u6587\u4ef6\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\uff0c\u6211\u4eec\u7f16\u8f91 `page\/site\/index.jsx` \u8fd9\u4e2a\u6587\u4ef6\uff0c\u5728\u91cc\u9762\u5c1d\u8bd5\u8bf7\u6c42\u4e00\u4e0b\uff0c\u770b\u770b\u662f\u5426\u80fd\u591f\u8bf7\u6c42\u5230\u6570\u636e\u3002\n\n\u5185\u5bb9\u5982\u4e0b\uff1a\n\n```js\nimport React, { Component } from 'react'\nimport Api from '@\/tool\/api.js'\n\nexport default class Index extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount () {\n    Api.get('topics', null, r => {\n      console.log(r)\n    })\n  }\n\n  render () {\n    return (\n      <div className=\"outer home\">\n        indexPage\n      <\/div>\n    )\n  }\n}\n```\n\n\u6839\u636e\u8fd9\u6bb5\u4ee3\u7801\uff0c\u63a7\u5236\u53f0\u6309\u7167\u6211\u4eec\u7684\u9700\u8981\uff0c\u6253\u5370\u51fa\u4e86\u4ee5\u4e0b\u5185\u5bb9\u3002\u8bf4\u660e\u6211\u4eec\u7684\u914d\u7f6e\u6210\u529f\u4e86\u3002\n\n![](https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/79\/04350f07343578c34a7006e40f894f.jpg)\n\n\n> `componentDidMount` \u662f\u8bf4\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u6267\u884c\uff0c\u66f4\u591a\u5185\u5bb9\uff0c\u8bf7\u641c\u7d22 **react \u751f\u547d\u5468\u671f** \u67e5\u770b\u76f8\u5173\u5185\u5bb9\u3002\n> \n> \u5982\u679c\u662f\u521d\u6b21\u63a5\u89e6 react \u80af\u5b9a\u5bf9\u4e0a\u9762\u7684\u4ee3\u7801\u4e91\u91cc\u96fe\u91cc\uff0c\u4e0d\u77e5\u6240\u4e91\u3002\u4f46\u662f\uff0c\u8fd9\u6839\u672c\u5c31\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f\u9879\u76ee\u8dd1\u8d77\u6765\uff0c\u8dd1\u8d77\u6765\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6162\u6162\u7684\u628a\u8fd9\u4e9b\u672a\u77e5\u7684\u95ee\u9898\u5168\u90e8\u641e\u5b9a\u3002\u4e34\u6e0a\u7fa1\u9c7c\u4e0d\u5982\u9000\u800c\u7ed3\u7f51\u3002\u7ad9\u5728\u6cb3\u8fb9\u662f\u5b66\u4e0d\u4f1a\u6e38\u6cf3\u7684\u3002\n> \n> \u73b0\u5728\u4f60\u8981\u505a\u7684\u5c31\u662f\uff0c\u590d\u5236\uff0c\u7c98\u8d34\uff0c\u8dd1\u8d77\u6765\uff0c\u6210\u529f\u4e86\uff0c\u6b27\u8036\uff01\n\n\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002\n\n","private":0,"tags":"react,reactjs,react\u8bf7\u6c42\u63a5\u53e3,react\u4e2d\u6587\u6587\u6863,react API","categories":"JavaScript,reactjs","channel":"14","type":"original","status":1},"error":"","status":true}