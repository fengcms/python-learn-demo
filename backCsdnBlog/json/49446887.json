{"data":{"id":"49446887","title":"jquery \u505a\u4e00\u4e2a\u5c0f\u7684\u5012\u8ba1\u65f6\u6548\u679c","articleedittype":1,"description":"html<div id=\"shop_rec\">\n    <ul class=\"cf\">\n        <li>\n            <img src=\"image\/goods.jpg\" alt=\"\u5c0f\u7c73 Note \u9876\u914d\u7248\" \/>\n            <div>\n                <h5>\u5c0f\u7c73 Note \u9876\u914d\u7248<\/h5>\n                <p>\u5168\u7f51\u901a \u9999\u69df\u91d1 \u79fb\u52a8","content":"<h2 id=\"html\">html<\/h2>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div<\/span> <span class=\"hljs-attribute\">id<\/span>=<span class=\"hljs-value\">\"shop_rec\"<\/span>&gt;<\/span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">ul<\/span> <span class=\"hljs-attribute\">class<\/span>=<span class=\"hljs-value\">\"cf\"<\/span>&gt;<\/span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li<\/span>&gt;<\/span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img<\/span> <span class=\"hljs-attribute\">src<\/span>=<span class=\"hljs-value\">\"image\/goods.jpg\"<\/span> <span class=\"hljs-attribute\">alt<\/span>=<span class=\"hljs-value\">\"\u5c0f\u7c73 Note \u9876\u914d\u7248\"<\/span> \/&gt;<\/span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">h5<\/span>&gt;<\/span>\u5c0f\u7c73 Note \u9876\u914d\u7248<span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">h5<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">p<\/span>&gt;<\/span>\u5168\u7f51\u901a \u9999\u69df\u91d1 \u79fb\u52a8\u8054\u901a<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">br<\/span> \/&gt;<\/span>\u53cc4G\u624b\u673a \u53cc\u5361\u53cc\u5f85<span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">p<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">em<\/span>&gt;<\/span>\u00a52998<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">i<\/span>&gt;<\/span>\u8d77<span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">i<\/span>&gt;<\/span><span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">em<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span<\/span> <span class=\"hljs-attribute\">class<\/span>=<span class=\"hljs-value\">\"time\"<\/span> <span class=\"hljs-attribute\">data-starttime<\/span>=<span class=\"hljs-value\">\"1445982375\"<\/span> <span class=\"hljs-attribute\">data-endtime<\/span>=<span class=\"hljs-value\">\"1446350400\"<\/span>&gt;<\/span><span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">span<\/span>&gt;<\/span>\n            <span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">div<\/span>&gt;<\/span>\n        <span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">li<\/span>&gt;<\/span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li<\/span>&gt;<\/span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img<\/span> <span class=\"hljs-attribute\">src<\/span>=<span class=\"hljs-value\">\"image\/goods.jpg\"<\/span> <span class=\"hljs-attribute\">alt<\/span>=<span class=\"hljs-value\">\"\u5c0f\u7c73 Note \u9876\u914d\u7248\"<\/span> \/&gt;<\/span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">h5<\/span>&gt;<\/span>\u5c0f\u7c73 Note \u9876\u914d\u7248<span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">h5<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">p<\/span>&gt;<\/span>\u5168\u7f51\u901a \u9999\u69df\u91d1 \u79fb\u52a8\u8054\u901a<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">br<\/span> \/&gt;<\/span>\u53cc4G\u624b\u673a \u53cc\u5361\u53cc\u5f85<span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">p<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">em<\/span>&gt;<\/span>\u00a52998<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">i<\/span>&gt;<\/span>\u8d77<span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">i<\/span>&gt;<\/span><span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">em<\/span>&gt;<\/span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span<\/span> <span class=\"hljs-attribute\">class<\/span>=<span class=\"hljs-value\">\"time\"<\/span> <span class=\"hljs-attribute\">data-starttime<\/span>=<span class=\"hljs-value\">\"1445912375\"<\/span> <span class=\"hljs-attribute\">data-endtime<\/span>=<span class=\"hljs-value\">\"1436350400\"<\/span>&gt;<\/span><span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">span<\/span>&gt;<\/span>\n            <span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">div<\/span>&gt;<\/span>\n        <span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">li<\/span>&gt;<\/span>\n    <span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">ul<\/span>&gt;<\/span>\n<span class=\"hljs-tag\">&lt;\/<span class=\"hljs-title\">div<\/span>&gt;<\/span><\/code><\/pre>\n\n<h2 id=\"jquery\">jquery<\/h2>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs javascript\">$(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span><span class=\"hljs-params\">()<\/span>{<\/span>\n    <span class=\"hljs-keyword\">var<\/span> abj = $(<span class=\"hljs-string\">\"#shop_rec\"<\/span>),\n        timeObj = abj.find(<span class=\"hljs-string\">'.time'<\/span>);\n    <span class=\"hljs-keyword\">var<\/span> starttime = timeObj.data(<span class=\"hljs-string\">'starttime'<\/span>);\n\n    <span class=\"hljs-comment\">\/\/ \u5b9a\u65f6\u5668\u51fd\u6570<\/span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span> <span class=\"hljs-title\">actionDo<\/span><span class=\"hljs-params\">()<\/span>{<\/span>\n        <span class=\"hljs-keyword\">return<\/span> setInterval(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span><span class=\"hljs-params\">()<\/span>{<\/span>\n            timeObj.each(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function<\/span><span class=\"hljs-params\">(index, el)<\/span> {<\/span>\n                <span class=\"hljs-keyword\">var<\/span> t = $(<span class=\"hljs-keyword\">this<\/span>),\n                    surplusTime = t.data(<span class=\"hljs-string\">'endtime'<\/span>) -starttime;\n                <span class=\"hljs-keyword\">if<\/span> (surplusTime &lt;= <span class=\"hljs-number\">0<\/span>) {\n                    t.html(<span class=\"hljs-string\">\"\u6d3b\u52a8\u5df2\u7ecf\u5f00\u59cb\"<\/span>);\n                } <span class=\"hljs-keyword\">else<\/span>{\n                    <span class=\"hljs-keyword\">var<\/span> year = surplusTime\/(<span class=\"hljs-number\">24<\/span>*<span class=\"hljs-number\">60<\/span>*<span class=\"hljs-number\">60<\/span>*<span class=\"hljs-number\">365<\/span>),\n                        showYear = <span class=\"hljs-built_in\">parseInt<\/span>(year),\n                        month = (year-showYear)*<span class=\"hljs-number\">12<\/span>,\n                        showMonth = <span class=\"hljs-built_in\">parseInt<\/span>(month),\n                        day = (month-showMonth)*<span class=\"hljs-number\">30<\/span>,\n                        showDay = <span class=\"hljs-built_in\">parseInt<\/span>(day),\n                        hour = (day-showDay)*<span class=\"hljs-number\">24<\/span>,\n                        showHour = <span class=\"hljs-built_in\">parseInt<\/span>(hour),\n                        minute = (hour-showHour)*<span class=\"hljs-number\">60<\/span>,\n                        showMinute = <span class=\"hljs-built_in\">parseInt<\/span>(minute),\n                        seconds = (minute-showMinute)*<span class=\"hljs-number\">60<\/span>,\n                        showSeconds = <span class=\"hljs-built_in\">parseInt<\/span>(seconds);\n                    t.html(<span class=\"hljs-string\">\"\"<\/span>);\n                    <span class=\"hljs-keyword\">if<\/span> (showYear&gt;<span class=\"hljs-number\">0<\/span>) {\n                        t.append(<span class=\"hljs-string\">\"&lt;span&gt;\"<\/span>+showYear+<span class=\"hljs-string\">\"\u5e74&lt;\/span&gt;\"<\/span>)\n                    };\n                    <span class=\"hljs-keyword\">if<\/span> (showMonth&gt;<span class=\"hljs-number\">0<\/span>) {\n                        t.append(<span class=\"hljs-string\">\"&lt;span&gt;\"<\/span>+showMonth+<span class=\"hljs-string\">\"\u6708&lt;\/span&gt;\"<\/span>)\n                    };\n                    <span class=\"hljs-keyword\">if<\/span> (showDay&gt;<span class=\"hljs-number\">0<\/span>) {\n                        t.append(<span class=\"hljs-string\">\"&lt;span&gt;\"<\/span>+showDay+<span class=\"hljs-string\">\"\u5929&lt;\/span&gt;\"<\/span>)\n                    };\n                    <span class=\"hljs-keyword\">if<\/span> (showHour&gt;=<span class=\"hljs-number\">0<\/span>) {\n                        t.append(<span class=\"hljs-string\">\"&lt;span&gt;\"<\/span>+showHour+<span class=\"hljs-string\">\"\u5c0f\u65f6&lt;\/span&gt;\"<\/span>)\n                    };\n                    <span class=\"hljs-keyword\">if<\/span> (showMinute&gt;=<span class=\"hljs-number\">0<\/span>) {\n                        t.append(<span class=\"hljs-string\">\"&lt;span&gt;\"<\/span>+showMinute+<span class=\"hljs-string\">\"\u5206\u949f&lt;\/span&gt;\"<\/span>)\n                    };\n                    <span class=\"hljs-keyword\">if<\/span> (showSeconds&gt;=<span class=\"hljs-number\">0<\/span>) {\n                        t.append(<span class=\"hljs-string\">\"&lt;span&gt;\"<\/span>+showSeconds+<span class=\"hljs-string\">\"\u79d2&lt;\/span&gt;\"<\/span>)\n                    };\n                };\n            });\n            starttime++;\n        },<span class=\"hljs-number\">1000<\/span>); <span class=\"hljs-comment\">\/\/ \u8bbe\u5b9a\u6267\u884c\u6216\u5ef6\u65f6\u65f6\u95f4<\/span>\n    };\n    <span class=\"hljs-comment\">\/\/ \u6267\u884c\u5b83<\/span>\n    actionDo();\n});<\/code><\/pre>\n\n<h2 id=\"\u603b\u7ed3\">\u603b\u7ed3<\/h2>\n\n<p>\u4e0d\u662f\u7279\u522b\u4f18\u79c0\uff0c\u4f46\u662f\u5c0f\u7684\u5e94\u7528\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u3002<\/p>","markdowncontent":"##html\n```\n<div id=\"shop_rec\">\n\t<ul class=\"cf\">\n\t\t<li>\n\t\t\t<img src=\"image\/goods.jpg\" alt=\"\u5c0f\u7c73 Note \u9876\u914d\u7248\" \/>\n\t\t\t<div>\n\t\t\t\t<h5>\u5c0f\u7c73 Note \u9876\u914d\u7248<\/h5>\n\t\t\t\t<p>\u5168\u7f51\u901a \u9999\u69df\u91d1 \u79fb\u52a8\u8054\u901a<br \/>\u53cc4G\u624b\u673a \u53cc\u5361\u53cc\u5f85<\/p>\n\t\t\t\t<em>\u00a52998<i>\u8d77<\/i><\/em>\n\t\t\t\t<span class=\"time\" data-starttime=\"1445982375\" data-endtime=\"1446350400\"><\/span>\n\t\t\t<\/div>\n\t\t<\/li>\n\t\t<li>\n\t\t\t<img src=\"image\/goods.jpg\" alt=\"\u5c0f\u7c73 Note \u9876\u914d\u7248\" \/>\n\t\t\t<div>\n\t\t\t\t<h5>\u5c0f\u7c73 Note \u9876\u914d\u7248<\/h5>\n\t\t\t\t<p>\u5168\u7f51\u901a \u9999\u69df\u91d1 \u79fb\u52a8\u8054\u901a<br \/>\u53cc4G\u624b\u673a \u53cc\u5361\u53cc\u5f85<\/p>\n\t\t\t\t<em>\u00a52998<i>\u8d77<\/i><\/em>\n\t\t\t\t<span class=\"time\" data-starttime=\"1445912375\" data-endtime=\"1436350400\"><\/span>\n\t\t\t<\/div>\n\t\t<\/li>\n\t<\/ul>\n<\/div>\n```\n##jquery\n```\n$(function(){\n\tvar abj = $(\"#shop_rec\"),\n\t\ttimeObj = abj.find('.time');\n\tvar starttime = timeObj.data('starttime');\n\n\t\/\/ \u5b9a\u65f6\u5668\u51fd\u6570\n\tfunction actionDo(){\n\t\treturn setInterval(function(){\n\t\t\ttimeObj.each(function(index, el) {\n\t\t\t\tvar t = $(this),\n\t\t\t\t\tsurplusTime = t.data('endtime') -starttime;\n\t\t\t\tif (surplusTime <= 0) {\n\t\t\t\t\tt.html(\"\u6d3b\u52a8\u5df2\u7ecf\u5f00\u59cb\");\n\t\t\t\t} else{\n\t\t\t\t\tvar year = surplusTime\/(24*60*60*365),\n\t\t\t\t\t\tshowYear = parseInt(year),\n\t\t\t\t\t\tmonth = (year-showYear)*12,\n\t\t\t\t\t\tshowMonth = parseInt(month),\n\t\t\t\t\t\tday = (month-showMonth)*30,\n\t\t\t\t\t\tshowDay = parseInt(day),\n\t\t\t\t\t\thour = (day-showDay)*24,\n\t\t\t\t\t\tshowHour = parseInt(hour),\n\t\t\t\t\t\tminute = (hour-showHour)*60,\n\t\t\t\t\t\tshowMinute = parseInt(minute),\n\t\t\t\t\t\tseconds = (minute-showMinute)*60,\n\t\t\t\t\t\tshowSeconds = parseInt(seconds);\n\t\t\t\t\tt.html(\"\");\n\t\t\t\t\tif (showYear>0) {\n\t\t\t\t\t\tt.append(\"<span>\"+showYear+\"\u5e74<\/span>\")\n\t\t\t\t\t};\n\t\t\t\t\tif (showMonth>0) {\n\t\t\t\t\t\tt.append(\"<span>\"+showMonth+\"\u6708<\/span>\")\n\t\t\t\t\t};\n\t\t\t\t\tif (showDay>0) {\n\t\t\t\t\t\tt.append(\"<span>\"+showDay+\"\u5929<\/span>\")\n\t\t\t\t\t};\n\t\t\t\t\tif (showHour>=0) {\n\t\t\t\t\t\tt.append(\"<span>\"+showHour+\"\u5c0f\u65f6<\/span>\")\n\t\t\t\t\t};\n\t\t\t\t\tif (showMinute>=0) {\n\t\t\t\t\t\tt.append(\"<span>\"+showMinute+\"\u5206\u949f<\/span>\")\n\t\t\t\t\t};\n\t\t\t\t\tif (showSeconds>=0) {\n\t\t\t\t\t\tt.append(\"<span>\"+showSeconds+\"\u79d2<\/span>\")\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t});\n\t\t\tstarttime++;\n\t\t},1000); \/\/ \u8bbe\u5b9a\u6267\u884c\u6216\u5ef6\u65f6\u65f6\u95f4\n\t};\n\t\/\/ \u6267\u884c\u5b83\n\tactionDo();\n});\n```\n##\u603b\u7ed3\n\u4e0d\u662f\u7279\u522b\u4f18\u79c0\uff0c\u4f46\u662f\u5c0f\u7684\u5e94\u7528\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u3002","private":0,"tags":"jquery,\u5012\u8ba1\u65f6","categories":"jQuery","channel":"14","type":"original","status":1},"error":"","status":true}