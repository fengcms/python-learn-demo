{"data":{"id":"80841308","title":"React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c","articleedittype":1,"description":"React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c\n\n\u597d\uff0c\u524d\u9762\u6211\u4eec\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u5f00\u53d1\uff0c\u5df2\u7ecf\u638c\u63e1\u4e86\u4e00\u4e9b\u5185\u5bb9\u4e86\u3002\u8fd9\u7bc7\u535a\u6587\uff0c\u6211\u4eec\u8981\u5b66\u4e60\uff0c\u5982\u4f55\u5c06\u9879\u76ee\u6253\u5305\u3002\n\n\n\n\u5c06\u9879\u76ee\u6253\u5305\u5230\u6839\u76ee\u5f55\u8fd0\u884c\n\n\u5982\u679c\u6211\u4eec\u9700\u8981\u5c06\u9879\u76ee\u6253\u5305\u5230\u6839\u76ee\u5f55\u8fd0\u884c\uff0c\u8fd9\u4e2a\u5c31\u975e\u5e38\u975e\u5e38\u7b80\u5355\u4e86\u3002\u6211\u4eec\u53ea\u9700\u8981\u8fd0\u884c\n\n\n\nnpm run build\n\n\u547d\u4ee4\uff0c\u7136\u540e\uff0c\u7b49\u5f85\u7f16\u8bd1\uff0c\u8fc7\u4f1a\u513f\u5c31\u7f16\u8bd1\u597d\uff0c\u5e76\u5c06\u6211\u4eec\u7684\u6587\u4ef6\u5bf8\u5728\u4e86 build...","content":"<h1 id=\"react-webpack-\u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\u5341\u4e00\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c<\/h1>\n\n\n\n<h2 id=\"react-\u5165\u95e8\u7cfb\u5217\u6559\u7a0b\u5bfc\u822a\">React \u5165\u95e8\u7cfb\u5217\u6559\u7a0b\u5bfc\u822a<\/h2>\n\n<p><a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841159\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e00\uff09\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841181\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e8c\uff09\u521b\u5efa\u9879\u76ee<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841200\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e09\uff09\u76ee\u5f55\u8bf4\u660e\u4ee5\u53ca\u8c03\u6574\u9879\u76ee\u6784\u67b6\u6587\u4ef6<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841220\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u56db\uff09\u8c03\u6574\u9879\u76ee\u6587\u4ef6\u4ee5\u53ca\u9879\u76ee\u914d\u7f6e<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841241\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841255\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516d\uff09\u6e32\u67d3\u4e00\u4e2a\u5217\u8868\uff0c\u521d\u8bc6 jsx \u6587\u4ef6<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841263\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e03\uff09jsx \u7ec4\u4ef6\u4e2d\u8c03\u7528\u7ec4\u4ef6\u3001\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u503c<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841274\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516b\uff09Link \u8df3\u8f6c\u4ee5\u53ca\u7f16\u5199\u5185\u5bb9\u9875\u9762<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841290\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e5d\uff09\u5b50\u7ec4\u4ef6\u7ed9\u7236\u7ec4\u4ef6\u4f20\u503c<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841296\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\uff09\u5728 jsx \u548c scss \u4e2d\u4f7f\u7528\u56fe\u7247<\/a> <br>\n<a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841308\">React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c<\/a><\/p>\n\n<hr>\n\n<p>\u597d\uff0c\u524d\u9762\u6211\u4eec\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u5f00\u53d1\uff0c\u5df2\u7ecf\u638c\u63e1\u4e86\u4e00\u4e9b\u5185\u5bb9\u4e86\u3002\u8fd9\u7bc7\u535a\u6587\uff0c\u6211\u4eec\u8981\u5b66\u4e60\uff0c\u5982\u4f55\u5c06\u9879\u76ee\u6253\u5305\u3002<\/p>\n\n<h2 id=\"\u5c06\u9879\u76ee\u6253\u5305\u5230\u6839\u76ee\u5f55\u8fd0\u884c\">\u5c06\u9879\u76ee\u6253\u5305\u5230\u6839\u76ee\u5f55\u8fd0\u884c<\/h2>\n\n<p>\u5982\u679c\u6211\u4eec\u9700\u8981\u5c06\u9879\u76ee\u6253\u5305\u5230\u6839\u76ee\u5f55\u8fd0\u884c\uff0c\u8fd9\u4e2a\u5c31\u975e\u5e38\u975e\u5e38\u7b80\u5355\u4e86\u3002\u6211\u4eec\u53ea\u9700\u8981\u8fd0\u884c<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-shell hljs coffeescript\"><span class=\"hljs-built_in\">npm<\/span> run build<\/code><\/pre>\n\n<p>\u547d\u4ee4\uff0c\u7136\u540e\uff0c\u7b49\u5f85\u7f16\u8bd1\uff0c\u8fc7\u4f1a\u513f\u5c31\u7f16\u8bd1\u597d\uff0c\u5e76\u5c06\u6211\u4eec\u7684\u6587\u4ef6\u5bf8\u5728\u4e86 <code>build<\/code> \u76ee\u5f55\uff0c\u6211\u4eec\u5c06\u7f16\u8bd1\u51fa\u6765\u7684\u6587\u4ef6\u4ea4\u7ed9\u8fd0\u7ef4\u53bb\u90e8\u7f72\u5c31\u53ef\u4ee5\u4e86\u3002<\/p>\n\n<p><img src=\"https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/5a\/2556a200a219753caf071e376bc726.jpg\" alt=\"\" title=\"\"><\/p>\n\n<p>\u4e0a\u56fe\u662f\u7f16\u8bd1\u8fc7\u7a0b\uff0c\u6211\u4eec\u7f16\u8bd1\u7684\u6587\u4ef6\u5982\u4e0b\uff1a<\/p>\n\n<p><img src=\"https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/44\/0f9f75ae28e51745da47462745545d.jpg\" alt=\"\" title=\"\"><\/p>\n\n<p>\u5f88\u6e05\u695a\uff0c\u56fe\u7247\u662f\u56fe\u7247\uff0c\u6837\u5f0f\u662f\u6837\u5f0f\uff0c\u811a\u672c\u662f\u811a\u672c\u3002\u5f88\u5408\u9002\u3002<\/p>\n\n<p>\u95ee\u9898\u662f\uff0c\u6211\u4eec\u5982\u679c\u8981\u90e8\u7f72\u5230\u5b50\u76ee\u5f55\uff0c\u600e\u4e48\u529e\uff1f<\/p>\n\n\n\n<h2 id=\"\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\">\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55<\/h2>\n\n<p>\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\uff0c\u6211\u4eec\u9700\u8981\u7ecf\u8fc7\u82e5\u5e72\u914d\u7f6e\u3002\u6211\u8fd9\u8fb9\u4ee5\u6211\u4eec\u8981\u6253\u5305\u5230 <code>\/love\/<\/code> \u8fd9\u4e2a\u76ee\u5f55\u4e0b\u9762\u4e3a\u4f8b\uff0c\u4e3e\u4f8b\u8bf4\u660e\uff0c\u6211\u4eec\u9700\u8981\u600e\u4e48\u5904\u7406\u3002 <\/p>\n\n\n\n<h3 id=\"\u5728-packagejson-\u4e2d\u914d\u7f6e\u5b50\u76ee\u5f55\">\u5728 package.json \u4e2d\u914d\u7f6e\u5b50\u76ee\u5f55<\/h3>\n\n<p>\u9996\u5148\uff0c\u6211\u4eec\u6253\u5f00 <code>package.json<\/code> \u6587\u4ef6\uff0c\u5728\u5176\u4e2d\u6dfb\u52a0\uff1a<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-json hljs \"><span class=\"hljs-string\">\"homepage\"<\/span>: <span class=\"hljs-string\">\"\/love\/\"<\/span>,<\/code><\/pre>\n\n<p><img src=\"https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/bb\/d06edf602a1300cda73d2cd25bf75d.jpg\" alt=\"\" title=\"\"><\/p>\n\n<p><code>react<\/code> \u7684\u811a\u624b\u67b6\u548c <code>vue<\/code> \u7684\u811a\u624b\u67b6\u6709\u6240\u4e0d\u540c\uff0c\u5c31\u662f\uff0c\u5f88\u591a\u7684\u8bbe\u7f6e\uff0c\u90fd\u662f\u5728 <code>package.json<\/code> \u4e2d\u8fdb\u884c\u914d\u7f6e\u7684\u3002\u6ca1\u6709\u4ec0\u4e48\u4f18\u52a3\uff0c\u4e60\u60ef\u4e86\u5c31\u597d\u3002<\/p>\n\n\n\n<h3 id=\"\u914d\u7f6e\u8def\u7531\u6587\u4ef6\">\u914d\u7f6e\u8def\u7531\u6587\u4ef6<\/h3>\n\n<p>\u9664\u4e86\u5728\u4e0a\u9762\u7684\u6587\u4ef6\u4e2d\u914d\u7f6e\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8c03\u6574\u8def\u7531\uff0c\u6211\u4eec\u9700\u8981\u5c06 <code>Router<\/code> \u4e2d\u7684 <code>basename<\/code> \u53c2\u6570\u4fee\u6539 <code>\/love\/<\/code> \u8fd9\u6837\u624d\u53ef\u4ee5\u3002<\/p>\n\n<p>\u5982\u4e0b\u56fe\u6240\u793a\uff1a<\/p>\n\n<p><img src=\"https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/84\/2c04cdec6bcde8a3584857bdccba17.jpg\" alt=\"\" title=\"\"><\/p>\n\n<p>\u597d\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u914d\u7f6e\u5b8c\u6210\u4e86\u3002<\/p>\n\n\n\n<h3 id=\"\u4fee\u6539-toolpathjs-\u6587\u4ef6\">\u4fee\u6539 @\/tool\/path.js \u6587\u4ef6<\/h3>\n\n<p>\u4e0a\u4e00\u7ae0\u4e2d\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u5982\u4f55\u5728 <code>react<\/code> \u4e2d\u5f15\u5165\u56fe\u7247\uff0c\u5e76\u4e14\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 <code>@\/tool\/path.js<\/code> \u8fd9\u4e2a\u7a0b\u5e8f\u6765\u5904\u7406\u751f\u4ea7\u73af\u5883\u548c\u5f00\u53d1\u73af\u5883\u7684\u56fe\u7247\u4e0d\u540c\u524d\u7f00\uff0c\u8fd9\u91cc\uff0c\u6211\u4eec\u5c31\u9700\u8981\u6765\u8fdb\u884c\u5904\u7406\u4e86\u3002<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-js hljs \"><span class=\"hljs-keyword\">const<\/span> NODE_ENV = process.env.NODE_ENV\nexport <span class=\"hljs-keyword\">default<\/span> (src) =&gt; {\n  <span class=\"hljs-keyword\">let<\/span> prod_fix = <span class=\"hljs-string\">'\/love'<\/span>\n  <span class=\"hljs-keyword\">let<\/span> img_fix = <span class=\"hljs-string\">'\/image\/'<\/span>\n  <span class=\"hljs-keyword\">return<\/span> NODE_ENV === <span class=\"hljs-string\">'production'<\/span> ? prod_fix + img_fix + src : img_fix + src\n}<\/code><\/pre>\n\n<p>\u5982\u4e0a\uff0c\u4fee\u6539 <code>prod_fix<\/code> \u7684\u524d\u7f00\u4e3a <code>\/love<\/code> \uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u4e86\u3002<\/p>\n\n\n\n<h3 id=\"\u4fee\u6539-stylestylescss-\u6587\u4ef6\">\u4fee\u6539 @\/style\/style.scss \u6587\u4ef6<\/h3>\n\n<p>\u4e0a\u4e00\u7ae0\u4e2d\uff0c\u6211\u4eec\u4e5f\u8bf4\u4e86\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u8fd9\u91cc\u6211\u4eec\u518d\u6765\u6f14\u793a\u4e00\u4e0b\uff1a<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-scss hljs \">$res<span class=\"hljs-value\">: <span class=\"hljs-string\">\"\/love\/image\/\"<\/span>;<\/span> <span class=\"hljs-comment\">\/\/ \u6253\u5305\u65f6\u7528\u6b64\u8def\u5f84<\/span>\n<span class=\"hljs-comment\">\/\/ $res: \"\/image\/\"; \/\/ \u672c\u5730\u5f00\u53d1\u662f\u7528\u6b64\u8def\u5f84<\/span><\/code><\/pre>\n\n<p>\u8c03\u6574\u4e3a\u8fd9\u6837\uff0c\u5373\u53ef\u3002\u4e0a\u9762\u7684\u4e09\u4e2a\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5904\u7406\u4e00\u6b21\uff0c\u552f\u72ec\u8fd9\u4e2a sass \u6587\u4ef6\uff0c\u6211\u4eec\u9700\u8981\u6bcf\u6b21\u6253\u5305\u7684\u65f6\u5019\u90fd\u4fee\u6539\u4e00\u4e0b\uff0c\u5f00\u53d1\u7684\u65f6\u5019\u518d\u4fee\u6539\u56de\u6765\u3002\u8fd9\u6837\u3002<\/p>\n\n\n\n<h3 id=\"\u6253\u5305\">\u6253\u5305<\/h3>\n\n<p>\u7ecf\u8fc7\u4e0a\u9762\u7684\u914d\u7f6e\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd0\u884c\u6211\u4eec\u7684\u6253\u5305\u547d\u4ee4\u4e86\u3002<code>npm run build<\/code>\uff0c\u6253\u5305\u5b8c\u6210\u4e4b\u540e\uff0c\u5c06 <code>build<\/code> \u4e2d\u7684\u6587\u4ef6\uff0c\u4ea4\u7ed9\u6211\u4eec\u7684\u8fd0\u7ef4\u90e8\u7f72\u3002<\/p>\n\n\n\n<h2 id=\"nginx-\u914d\u7f6e\u8865\u5145\u8bf4\u660e\">Nginx \u914d\u7f6e\u8865\u5145\u8bf4\u660e<\/h2>\n\n<p>\u8fd9\u90e8\u5206\u662f\u8865\u5145\u7ed9\u8fd0\u7ef4\u540c\u5b66\u770b\u7684\uff0c\u4ed6\u4e5f\u4e0d\u4e00\u5b9a\u80fd\u7528\u5230\u3002\u4f46\u662f\u5982\u679c\u8bbf\u95ee\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u53ef\u4ee5\u8ba9\u4ed6\u770b\u4e0b\u4e0b\u9762\u7684\u914d\u7f6e\u3002\u5e0c\u671b\u5bf9\u4ed6\u6709\u6240\u5e2e\u52a9\u3002\u5177\u4f53\u5185\u5bb9\u6211\u5c31\u4e0d\u9610\u8ff0\u4e86\u3002<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-shell hljs lasso\"> location \/marketing {\n            index index<span class=\"hljs-built_in\">.<\/span>html;\n            alias \/srv\/apps\/huanqiu<span class=\"hljs-attribute\">-marketing<\/span><span class=\"hljs-attribute\">-h5<\/span><span class=\"hljs-attribute\">-dist<\/span>\/build<span class=\"hljs-subst\">\/<\/span>;\n            proxy_set_header X<span class=\"hljs-attribute\">-Real<\/span><span class=\"hljs-attribute\">-IP<\/span>  <span class=\"hljs-variable\">$remote_addr<\/span>;\n            proxy_set_header X<span class=\"hljs-attribute\">-Forwarded<\/span><span class=\"hljs-attribute\">-For<\/span> <span class=\"hljs-variable\">$proxy_add_x_forwarded_for<\/span>;\n            proxy_set_header Host <span class=\"hljs-variable\">$http_host<\/span>;\n            proxy_redirect off;\n            <span class=\"hljs-keyword\">if<\/span> (<span class=\"hljs-subst\">!-<\/span>e <span class=\"hljs-variable\">$request_filename<\/span>) {\n                      rewrite ^<span class=\"hljs-subst\">\/<\/span>(<span class=\"hljs-built_in\">.<\/span><span class=\"hljs-subst\">*<\/span>) \/marketing\/index<span class=\"hljs-built_in\">.<\/span>html last;\n                      break;\n                  }\n      }      <\/code><\/pre>\n\n\n\n<h2 id=\"\u5176\u4ed6\u8865\u5145\">\u5176\u4ed6\u8865\u5145<\/h2>\n\n<p>\u5176\u5b9e\u8fd9\u4e2a\u4e8b\u60c5\u5e76\u4e0d\u590d\u6742\uff0c\u53ea\u662f\u76f8\u5173\u7684\u8d44\u6599\u90fd\u6bd4\u8f83\u7410\u788e\u3002\u5e0c\u671b\u5927\u5bb6\u8ddf\u7740\u6211\u6572\u4e86\u4e00\u904d\u4ee3\u7801\u4e4b\u540e\uff0c\u90fd\u5df2\u7ecf\u5165\u95e8\u4e86 <code>react<\/code> \u5f00\u53d1\u4e86\u3002\u795d\u5927\u5bb6\u6109\u5feb\u3002<\/p>\n\n<p>\u540e\u9762\uff0c\u6211\u4f1a\u968f\u65f6\u8865\u5145\u4e00\u4e9b\u5176\u4ed6\u7684\u76f8\u5173\u5185\u5bb9\uff0c\u5927\u5bb6\u6709\u5174\u8da3\uff0c\u5e0c\u671b\u53ef\u4ee5\u5173\u6ce8\u8fd9\u4e2a\u7cfb\u5217\u7684\u535a\u6587\u3002<\/p>\n\n<p>\u591a\u591a\u70b9\u8d5e\u5440\uff01<\/p>\n\n<p>\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002<\/p>","markdowncontent":"# React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c\n\n\n## React \u5165\u95e8\u7cfb\u5217\u6559\u7a0b\u5bfc\u822a\n\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e00\uff09\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841159)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e8c\uff09\u521b\u5efa\u9879\u76ee](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841181)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e09\uff09\u76ee\u5f55\u8bf4\u660e\u4ee5\u53ca\u8c03\u6574\u9879\u76ee\u6784\u67b6\u6587\u4ef6](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841200)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u56db\uff09\u8c03\u6574\u9879\u76ee\u6587\u4ef6\u4ee5\u53ca\u9879\u76ee\u914d\u7f6e](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841220)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e94\uff09\u914d\u7f6e api \u63a5\u53e3\u8bf7\u6c42\u6587\u4ef6](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841241)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516d\uff09\u6e32\u67d3\u4e00\u4e2a\u5217\u8868\uff0c\u521d\u8bc6 jsx \u6587\u4ef6](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841255)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e03\uff09jsx \u7ec4\u4ef6\u4e2d\u8c03\u7528\u7ec4\u4ef6\u3001\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u503c](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841263)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u516b\uff09Link \u8df3\u8f6c\u4ee5\u53ca\u7f16\u5199\u5185\u5bb9\u9875\u9762](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841274)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u4e5d\uff09\u5b50\u7ec4\u4ef6\u7ed9\u7236\u7ec4\u4ef6\u4f20\u503c](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841290)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\uff09\u5728 jsx \u548c scss \u4e2d\u4f7f\u7528\u56fe\u7247](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841296)\n[React + webpack \u5f00\u53d1\u5355\u9875\u9762\u5e94\u7528\u7b80\u660e\u4e2d\u6587\u6587\u6863\u6559\u7a0b\uff08\u5341\u4e00\uff09\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\u8fd0\u884c](http:\/\/blog.csdn.net\/fungleo\/article\/details\/80841308)\n\n****\n\n\u597d\uff0c\u524d\u9762\u6211\u4eec\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u5f00\u53d1\uff0c\u5df2\u7ecf\u638c\u63e1\u4e86\u4e00\u4e9b\u5185\u5bb9\u4e86\u3002\u8fd9\u7bc7\u535a\u6587\uff0c\u6211\u4eec\u8981\u5b66\u4e60\uff0c\u5982\u4f55\u5c06\u9879\u76ee\u6253\u5305\u3002\n\n## \u5c06\u9879\u76ee\u6253\u5305\u5230\u6839\u76ee\u5f55\u8fd0\u884c\n\n\u5982\u679c\u6211\u4eec\u9700\u8981\u5c06\u9879\u76ee\u6253\u5305\u5230\u6839\u76ee\u5f55\u8fd0\u884c\uff0c\u8fd9\u4e2a\u5c31\u975e\u5e38\u975e\u5e38\u7b80\u5355\u4e86\u3002\u6211\u4eec\u53ea\u9700\u8981\u8fd0\u884c\n\n```shell\nnpm run build\n```\n\n\u547d\u4ee4\uff0c\u7136\u540e\uff0c\u7b49\u5f85\u7f16\u8bd1\uff0c\u8fc7\u4f1a\u513f\u5c31\u7f16\u8bd1\u597d\uff0c\u5e76\u5c06\u6211\u4eec\u7684\u6587\u4ef6\u5bf8\u5728\u4e86 `build` \u76ee\u5f55\uff0c\u6211\u4eec\u5c06\u7f16\u8bd1\u51fa\u6765\u7684\u6587\u4ef6\u4ea4\u7ed9\u8fd0\u7ef4\u53bb\u90e8\u7f72\u5c31\u53ef\u4ee5\u4e86\u3002\n\n![](https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/5a\/2556a200a219753caf071e376bc726.jpg)\n\n\n\u4e0a\u56fe\u662f\u7f16\u8bd1\u8fc7\u7a0b\uff0c\u6211\u4eec\u7f16\u8bd1\u7684\u6587\u4ef6\u5982\u4e0b\uff1a\n\n![](https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/44\/0f9f75ae28e51745da47462745545d.jpg)\n\n\u5f88\u6e05\u695a\uff0c\u56fe\u7247\u662f\u56fe\u7247\uff0c\u6837\u5f0f\u662f\u6837\u5f0f\uff0c\u811a\u672c\u662f\u811a\u672c\u3002\u5f88\u5408\u9002\u3002\n\n\u95ee\u9898\u662f\uff0c\u6211\u4eec\u5982\u679c\u8981\u90e8\u7f72\u5230\u5b50\u76ee\u5f55\uff0c\u600e\u4e48\u529e\uff1f\n\n## \u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\n\n\u5c06\u9879\u76ee\u6253\u5305\u5230\u5b50\u76ee\u5f55\uff0c\u6211\u4eec\u9700\u8981\u7ecf\u8fc7\u82e5\u5e72\u914d\u7f6e\u3002\u6211\u8fd9\u8fb9\u4ee5\u6211\u4eec\u8981\u6253\u5305\u5230 `\/love\/` \u8fd9\u4e2a\u76ee\u5f55\u4e0b\u9762\u4e3a\u4f8b\uff0c\u4e3e\u4f8b\u8bf4\u660e\uff0c\u6211\u4eec\u9700\u8981\u600e\u4e48\u5904\u7406\u3002 \n\n### \u5728 package.json \u4e2d\u914d\u7f6e\u5b50\u76ee\u5f55\n\n\u9996\u5148\uff0c\u6211\u4eec\u6253\u5f00 `package.json` \u6587\u4ef6\uff0c\u5728\u5176\u4e2d\u6dfb\u52a0\uff1a\n\n```json\n\"homepage\": \"\/love\/\",\n```\n\n![](https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/bb\/d06edf602a1300cda73d2cd25bf75d.jpg)\n\n`react` \u7684\u811a\u624b\u67b6\u548c `vue` \u7684\u811a\u624b\u67b6\u6709\u6240\u4e0d\u540c\uff0c\u5c31\u662f\uff0c\u5f88\u591a\u7684\u8bbe\u7f6e\uff0c\u90fd\u662f\u5728 `package.json` \u4e2d\u8fdb\u884c\u914d\u7f6e\u7684\u3002\u6ca1\u6709\u4ec0\u4e48\u4f18\u52a3\uff0c\u4e60\u60ef\u4e86\u5c31\u597d\u3002\n\n### \u914d\u7f6e\u8def\u7531\u6587\u4ef6\n\n\u9664\u4e86\u5728\u4e0a\u9762\u7684\u6587\u4ef6\u4e2d\u914d\u7f6e\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8c03\u6574\u8def\u7531\uff0c\u6211\u4eec\u9700\u8981\u5c06 `Router` \u4e2d\u7684 `basename` \u53c2\u6570\u4fee\u6539 `\/love\/` \u8fd9\u6837\u624d\u53ef\u4ee5\u3002\n\n\u5982\u4e0b\u56fe\u6240\u793a\uff1a\n\n![](https:\/\/raw.githubusercontent.com\/fengcms\/articles\/master\/image\/84\/2c04cdec6bcde8a3584857bdccba17.jpg)\n\n\u597d\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u914d\u7f6e\u5b8c\u6210\u4e86\u3002\n\n### \u4fee\u6539 @\/tool\/path.js \u6587\u4ef6\n\n\u4e0a\u4e00\u7ae0\u4e2d\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u5982\u4f55\u5728 `react` \u4e2d\u5f15\u5165\u56fe\u7247\uff0c\u5e76\u4e14\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 `@\/tool\/path.js` \u8fd9\u4e2a\u7a0b\u5e8f\u6765\u5904\u7406\u751f\u4ea7\u73af\u5883\u548c\u5f00\u53d1\u73af\u5883\u7684\u56fe\u7247\u4e0d\u540c\u524d\u7f00\uff0c\u8fd9\u91cc\uff0c\u6211\u4eec\u5c31\u9700\u8981\u6765\u8fdb\u884c\u5904\u7406\u4e86\u3002\n\n```js\nconst NODE_ENV = process.env.NODE_ENV\nexport default (src) => {\n  let prod_fix = '\/love'\n  let img_fix = '\/image\/'\n  return NODE_ENV === 'production' ? prod_fix + img_fix + src : img_fix + src\n}\n```\n\u5982\u4e0a\uff0c\u4fee\u6539 `prod_fix` \u7684\u524d\u7f00\u4e3a `\/love` \uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u4e86\u3002\n\n### \u4fee\u6539 @\/style\/style.scss \u6587\u4ef6\n\n\u4e0a\u4e00\u7ae0\u4e2d\uff0c\u6211\u4eec\u4e5f\u8bf4\u4e86\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u8fd9\u91cc\u6211\u4eec\u518d\u6765\u6f14\u793a\u4e00\u4e0b\uff1a\n\n```scss\n$res: \"\/love\/image\/\"; \/\/ \u6253\u5305\u65f6\u7528\u6b64\u8def\u5f84\n\/\/ $res: \"\/image\/\"; \/\/ \u672c\u5730\u5f00\u53d1\u662f\u7528\u6b64\u8def\u5f84\n```\n\n\u8c03\u6574\u4e3a\u8fd9\u6837\uff0c\u5373\u53ef\u3002\u4e0a\u9762\u7684\u4e09\u4e2a\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5904\u7406\u4e00\u6b21\uff0c\u552f\u72ec\u8fd9\u4e2a sass \u6587\u4ef6\uff0c\u6211\u4eec\u9700\u8981\u6bcf\u6b21\u6253\u5305\u7684\u65f6\u5019\u90fd\u4fee\u6539\u4e00\u4e0b\uff0c\u5f00\u53d1\u7684\u65f6\u5019\u518d\u4fee\u6539\u56de\u6765\u3002\u8fd9\u6837\u3002\n\n### \u6253\u5305\n\n\u7ecf\u8fc7\u4e0a\u9762\u7684\u914d\u7f6e\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd0\u884c\u6211\u4eec\u7684\u6253\u5305\u547d\u4ee4\u4e86\u3002`npm run build`\uff0c\u6253\u5305\u5b8c\u6210\u4e4b\u540e\uff0c\u5c06 `build` \u4e2d\u7684\u6587\u4ef6\uff0c\u4ea4\u7ed9\u6211\u4eec\u7684\u8fd0\u7ef4\u90e8\u7f72\u3002\n\n## Nginx \u914d\u7f6e\u8865\u5145\u8bf4\u660e\n\n\u8fd9\u90e8\u5206\u662f\u8865\u5145\u7ed9\u8fd0\u7ef4\u540c\u5b66\u770b\u7684\uff0c\u4ed6\u4e5f\u4e0d\u4e00\u5b9a\u80fd\u7528\u5230\u3002\u4f46\u662f\u5982\u679c\u8bbf\u95ee\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u53ef\u4ee5\u8ba9\u4ed6\u770b\u4e0b\u4e0b\u9762\u7684\u914d\u7f6e\u3002\u5e0c\u671b\u5bf9\u4ed6\u6709\u6240\u5e2e\u52a9\u3002\u5177\u4f53\u5185\u5bb9\u6211\u5c31\u4e0d\u9610\u8ff0\u4e86\u3002\n\n```shell\n location \/marketing {\n            index index.html;\n            alias \/srv\/apps\/huanqiu-marketing-h5-dist\/build\/;\n            proxy_set_header X-Real-IP  $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header Host $http_host;\n            proxy_redirect off;\n            if (!-e $request_filename) {\n                      rewrite ^\/(.*) \/marketing\/index.html last;\n                      break;\n                  }\n      }      \n```\n\n\n## \u5176\u4ed6\u8865\u5145\n\n\u5176\u5b9e\u8fd9\u4e2a\u4e8b\u60c5\u5e76\u4e0d\u590d\u6742\uff0c\u53ea\u662f\u76f8\u5173\u7684\u8d44\u6599\u90fd\u6bd4\u8f83\u7410\u788e\u3002\u5e0c\u671b\u5927\u5bb6\u8ddf\u7740\u6211\u6572\u4e86\u4e00\u904d\u4ee3\u7801\u4e4b\u540e\uff0c\u90fd\u5df2\u7ecf\u5165\u95e8\u4e86 `react` \u5f00\u53d1\u4e86\u3002\u795d\u5927\u5bb6\u6109\u5feb\u3002\n\n\u540e\u9762\uff0c\u6211\u4f1a\u968f\u65f6\u8865\u5145\u4e00\u4e9b\u5176\u4ed6\u7684\u76f8\u5173\u5185\u5bb9\uff0c\u5927\u5bb6\u6709\u5174\u8da3\uff0c\u5e0c\u671b\u53ef\u4ee5\u5173\u6ce8\u8fd9\u4e2a\u7cfb\u5217\u7684\u535a\u6587\u3002\n\n\u591a\u591a\u70b9\u8d5e\u5440\uff01\n\n\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002\n\n\n","private":0,"tags":"react,reactjs,react \u9879\u76ee\u6253\u5305,react \u6253\u5305\u81f3\u5b50\u76ee\u5f55,react\u5165\u95e8\u6559\u7a0b","categories":"JavaScript,reactjs","channel":"14","type":"original","status":1},"error":"","status":true}