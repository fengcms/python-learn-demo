{"data":{"id":"76685839","title":"Shell \u547d\u4ee4\u884c\u5b9e\u73b0\u5c06\u4e00\u4e2a\u7ad9\u70b9\u9875\u9762\u5168\u90e8\u4e0b\u8f7d\u5230\u672c\u5730\u5e76\u66ff\u6362\u5176\u4e2d\u94fe\u63a5\u7684\u811a\u672c","articleedittype":1,"description":"Shell \u547d\u4ee4\u884c\u5b9e\u73b0\u5c06\u4e00\u4e2a\u7ad9\u70b9\u9875\u9762\u5168\u90e8\u4e0b\u8f7d\u5230\u672c\u5730\u5e76\u66ff\u6362\u5176\u4e2d\u94fe\u63a5\u7684\u811a\u672c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u6211\u603b\u60f3\u7528 Shell \u811a\u672c\u6765\u5b9e\u73b0\u628a\u4e00\u4e2a\u7ad9\u70b9\u5185\u5bb9\u7ed9\u4e0b\u8f7d\u4e0b\u6765\u3002\u4f46\u662f\u4e0b\u8f7d\u4ec0\u4e48\u7ad9\u70b9\u6211\u786e\u4e0d\u77e5\u9053\u3002\u4eca\u5929\u5c1d\u8bd5\u4e86\u4e00\u4e0b\u5229\u7528 curl \u5b9e\u73b0\u4e86\u4e0b\u8f7d\u4e00\u4e2a\u7ad9\u70b9\u5217\u8868\u7684 demo \u7b97\u662f\u5c0f\u8bd5\u725b\u5200\u3002\u5f53\u811a\u672c\u6210\u529f\u4e4b\u540e\uff0c\u6211\u77e5\u9053\uff0c\u8981\u628a\u8fd9\u4e2a\u7ad9\u70b9\u5b8c\u5168\u4e0b\u8f7d\u4e0b\u6765\u4e5f\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002\u4e0d\u8fc7\u662f\u9700\u8981\u66f4\u52a0\u590d\u6742\u7684\u5faa\u73af\u548c\u5339\u914d\u800c\u5df2\u3002\u63a5\u4e0b\u6765\u6709\u5de5\u4f5c\u8981\u505a\uff0c\u6240\u4ee5 shell \u7684\u5b66\u4e60\u6682\u65f6\u5148\u544a\u4e00","content":"<h1 id=\"shell-\u547d\u4ee4\u884c\u5b9e\u73b0\u5c06\u4e00\u4e2a\u7ad9\u70b9\u9875\u9762\u5168\u90e8\u4e0b\u8f7d\u5230\u672c\u5730\u5e76\u66ff\u6362\u5176\u4e2d\u94fe\u63a5\u7684\u811a\u672c\">Shell \u547d\u4ee4\u884c\u5b9e\u73b0\u5c06\u4e00\u4e2a\u7ad9\u70b9\u9875\u9762\u5168\u90e8\u4e0b\u8f7d\u5230\u672c\u5730\u5e76\u66ff\u6362\u5176\u4e2d\u94fe\u63a5\u7684\u811a\u672c<\/h1>\n\n<p>\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u6211\u603b\u60f3\u7528 Shell \u811a\u672c\u6765\u5b9e\u73b0\u628a\u4e00\u4e2a\u7ad9\u70b9\u5185\u5bb9\u7ed9\u4e0b\u8f7d\u4e0b\u6765\u3002\u4f46\u662f\u4e0b\u8f7d\u4ec0\u4e48\u7ad9\u70b9\u6211\u786e\u4e0d\u77e5\u9053\u3002\u4eca\u5929\u5c1d\u8bd5\u4e86\u4e00\u4e0b\u5229\u7528 <code>curl<\/code> \u5b9e\u73b0\u4e86\u4e0b\u8f7d\u4e00\u4e2a\u7ad9\u70b9\u5217\u8868\u7684 <code>demo<\/code> \u7b97\u662f\u5c0f\u8bd5\u725b\u5200\u3002<\/p>\n\n<p>\u5f53\u811a\u672c\u6210\u529f\u4e4b\u540e\uff0c\u6211\u77e5\u9053\uff0c\u8981\u628a\u8fd9\u4e2a\u7ad9\u70b9\u5b8c\u5168\u4e0b\u8f7d\u4e0b\u6765\u4e5f\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002\u4e0d\u8fc7\u662f\u9700\u8981\u66f4\u52a0\u590d\u6742\u7684\u5faa\u73af\u548c\u5339\u914d\u800c\u5df2\u3002<\/p>\n\n<p>\u63a5\u4e0b\u6765\u6709\u5de5\u4f5c\u8981\u505a\uff0c\u6240\u4ee5 shell \u7684\u5b66\u4e60\u6682\u65f6\u5148\u544a\u4e00\u6bb5\u843d\u3002<\/p>\n\n\n\n<h2 id=\"\u5b9e\u73b0\u4ee3\u7801\">\u5b9e\u73b0\u4ee3\u7801<\/h2>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-# hljs bash\"><span class=\"hljs-shebang\">#!\/bin\/bash<\/span>\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--\u5f00\u59cb\u4e0b\u8f7d\u9996\u9875--'<\/span>\ncurl <span class=\"hljs-operator\">-s<\/span> <span class=\"hljs-string\">'http:\/\/man.linuxde.net\/par\/5'<\/span> &gt; .\/html\/index.html\nmh=.\/html\/index.html\nsl=$(nl <span class=\"hljs-variable\">$mh<\/span> | grep <span class=\"hljs-string\">'&lt;div class=\"list_bd clearfix\"&gt;'<\/span> | head -<span class=\"hljs-number\">1<\/span> | sed <span class=\"hljs-string\">'s\/^[    ]*\/\/g'<\/span> | cut <span class=\"hljs-operator\">-d<\/span> <span class=\"hljs-string\">' '<\/span> <span class=\"hljs-operator\">-f<\/span>1)\nel=$(nl <span class=\"hljs-variable\">$mh<\/span> | grep <span class=\"hljs-string\">\"&lt;div class='paging'&gt;\"<\/span> | head -<span class=\"hljs-number\">1<\/span> | sed <span class=\"hljs-string\">'s\/^[  ]*\/\/g'<\/span> | cut <span class=\"hljs-operator\">-d<\/span> <span class=\"hljs-string\">' '<\/span> <span class=\"hljs-operator\">-f<\/span>1)\nsed -n  <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$sl<\/span>\"<\/span>,<span class=\"hljs-string\">\"<span class=\"hljs-variable\">$el<\/span>\"<\/span><span class=\"hljs-string\">'p'<\/span> <span class=\"hljs-variable\">$mh<\/span> &gt; main.htm\n\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--\u5f00\u59cb\u4e0b\u8f7d\u5185\u9875--'<\/span>\n<span class=\"hljs-comment\">#&lt;a href=\"<\/span>\n<span class=\"hljs-keyword\">while<\/span> <span class=\"hljs-built_in\">read<\/span> line; <span class=\"hljs-keyword\">do<\/span>\n  url=$(<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-variable\">$line<\/span> | grep <span class=\"hljs-string\">'&lt;a href=\"'<\/span> | sed <span class=\"hljs-string\">'s\/&lt;div class=\"name\"&gt;&lt;a href=\"\/\/g'<\/span> | cut <span class=\"hljs-operator\">-d<\/span> <span class=\"hljs-string\">'\"'<\/span> <span class=\"hljs-operator\">-f<\/span>1)\n  <span class=\"hljs-keyword\">if<\/span> [[ -n <span class=\"hljs-variable\">$url<\/span> ]]; <span class=\"hljs-keyword\">then<\/span>\n    <span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--\u5f00\u59cb\u4e0b\u8f7d'<\/span> <span class=\"hljs-variable\">$name<\/span> <span class=\"hljs-string\">'\u9875\u9762--'<\/span>\n    name=$(<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-variable\">$url<\/span> | cut <span class=\"hljs-operator\">-d<\/span> <span class=\"hljs-string\">'\/'<\/span> <span class=\"hljs-operator\">-f<\/span>4)\n    html=<span class=\"hljs-string\">'.\/html\/'<\/span><span class=\"hljs-variable\">$name<\/span><span class=\"hljs-string\">'.html'<\/span>\n    curl <span class=\"hljs-operator\">-s<\/span> <span class=\"hljs-variable\">$url<\/span> &gt; <span class=\"hljs-variable\">$html<\/span>\n    <span class=\"hljs-comment\"># echo '--\u5f00\u59cb\u5904\u7406' $name '\u9875\u9762\u94fe\u63a5--'<\/span>\n    <span class=\"hljs-comment\"># sed -i 's\/http:\\\/\\\/man\\.linuxde\\.net\\\/\/g' $html<\/span>\n  <span class=\"hljs-keyword\">fi<\/span>\n<span class=\"hljs-keyword\">done<\/span> &lt; main.htm\n\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--\u9875\u9762\u4e0b\u8f7d\u5b8c\u6210--'<\/span>\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--\u5904\u7406\u9875\u9762\u94fe\u63a5--'<\/span>\n\nsed -i <span class=\"hljs-string\">''<\/span> <span class=\"hljs-string\">'s\/http:\\\/\\\/man\\.linuxde\\.net\\\/\/\/g'<\/span> $(grep -rl <span class=\"hljs-string\">'http:\/\/man.linuxde.net'<\/span> .\/html)\nsed -i <span class=\"hljs-string\">''<\/span> <span class=\"hljs-string\">'s\/\" title=\"\/\\.html\" title=\"\/g'<\/span> $(grep -rl <span class=\"hljs-string\">'\" title=\"'<\/span> .\/html)\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--\u94fe\u63a5\u5904\u7406\u5b8c\u6210--'<\/span><\/code><\/pre>\n\n\n\n<h2 id=\"\u5b9e\u73b0\u539f\u7406\">\u5b9e\u73b0\u539f\u7406<\/h2>\n\n<ol>\n<li>\u5148\u4e0b\u8f7d\u5217\u8868\u9996\u9875\u3002\u6211\u8fd9\u91cc\u53ea\u662f\u5c1d\u8bd5\uff0c\u6240\u4ee5\u53ea\u4e0b\u8f7d\u4e86\u7b2c\u4e00\u9875\u3002\u5982\u679c\u8981\u4e0b\u8f7d\u591a\u9875\uff0c\u505a\u597d\u5faa\u73af\u4e4b\u540e\uff0c\u81ea\u52a8\u4e0b\u8f7d\u5c31\u662f\u3002<\/li>\n<li>\u622a\u53d6\u9875\u9762\u7684\u5217\u8868\u5185\u5bb9\u533a\u57df\u3002<\/li>\n<li>\u6839\u636e\u9875\u9762\u7279\u70b9\uff0c\u62c6\u89e3\u51fa\u9875\u9762\u94fe\u63a5\u3002<\/li>\n<li>\u5faa\u73af\u4e0b\u8f7d\u94fe\u63a5\u5e76\u4fdd\u5b58\u3002<\/li>\n<li>\u6279\u91cf\u66ff\u6362\u9875\u9762\u7684\u94fe\u63a5\u4e0d\u5408\u9002\u7684\u5730\u65b9\u3002<\/li>\n<\/ol>\n\n<p>\u7136\u540e\u5c31\u5927\u529f\u544a\u6210\u4e86\u3002<\/p>\n\n<p>\u4e0d\u8fc7 <code>wget<\/code> \u6bd4 <code>curl<\/code> \u53ef\u80fd\u66f4\u9002\u5408\u5e72\u8fd9\u4e2a\u5de5\u4f5c\u3002\u6211\u76ee\u524d\u8fd8\u6ca1\u6709\u5b66\u5230\u5f88\u6df1\u5165\u3002\u56de\u5934\u6709\u65f6\u95f4\u518d\u63a5\u7740\u7814\u7a76\u4e00\u4e0b\u3002<\/p>\n\n\n\n<h2 id=\"\u540e\u7eed\u8865\u5145\">\u540e\u7eed\u8865\u5145<\/h2>\n\n<p>\u770b\u4e86\u4e0b <code>wget<\/code> \u6211\u6c14\u70b8\u4e86\u3002\u539f\u6765\u6211\u8981\u4e0b\u8f7d\u4eba\u5bb6\u7f51\u7ad9\u5168\u7ad9\uff0c\u7528 <code>wget<\/code> \u4e00\u53e5\u547d\u4ee4\u5c31\u53ef\u4ee5\u641e\u5b9a\u4e86 -_-|||<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-# hljs lasso\">wget <span class=\"hljs-subst\">--<\/span>mirror <span class=\"hljs-attribute\">-p<\/span> <span class=\"hljs-subst\">--<\/span>convert<span class=\"hljs-attribute\">-links<\/span> <span class=\"hljs-attribute\">-P<\/span> <span class=\"hljs-built_in\">.<\/span><span class=\"hljs-subst\">\/<\/span> http:<span class=\"hljs-comment\">\/\/man.linuxde.net\/<\/span><\/code><\/pre>\n\n<p>\u795e\u5947\u7684 <code>shell<\/code> \uff01<\/p>\n\n<p>\u4ee5\u4e0a\u811a\u672c\u5747\u5728 mac \u4e0b\u6d4b\u8bd5\u901a\u8fc7\uff0c\u5728 Linux \u4e0b\u53ef\u80fd\u4f1a\u6709\u7a0d\u8bb8\u4e0d\u540c\u3002  <br>\n\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002<\/p>","markdowncontent":"# Shell \u547d\u4ee4\u884c\u5b9e\u73b0\u5c06\u4e00\u4e2a\u7ad9\u70b9\u9875\u9762\u5168\u90e8\u4e0b\u8f7d\u5230\u672c\u5730\u5e76\u66ff\u6362\u5176\u4e2d\u94fe\u63a5\u7684\u811a\u672c\n\n\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u6211\u603b\u60f3\u7528 Shell \u811a\u672c\u6765\u5b9e\u73b0\u628a\u4e00\u4e2a\u7ad9\u70b9\u5185\u5bb9\u7ed9\u4e0b\u8f7d\u4e0b\u6765\u3002\u4f46\u662f\u4e0b\u8f7d\u4ec0\u4e48\u7ad9\u70b9\u6211\u786e\u4e0d\u77e5\u9053\u3002\u4eca\u5929\u5c1d\u8bd5\u4e86\u4e00\u4e0b\u5229\u7528 `curl` \u5b9e\u73b0\u4e86\u4e0b\u8f7d\u4e00\u4e2a\u7ad9\u70b9\u5217\u8868\u7684 `demo` \u7b97\u662f\u5c0f\u8bd5\u725b\u5200\u3002\n\n\u5f53\u811a\u672c\u6210\u529f\u4e4b\u540e\uff0c\u6211\u77e5\u9053\uff0c\u8981\u628a\u8fd9\u4e2a\u7ad9\u70b9\u5b8c\u5168\u4e0b\u8f7d\u4e0b\u6765\u4e5f\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002\u4e0d\u8fc7\u662f\u9700\u8981\u66f4\u52a0\u590d\u6742\u7684\u5faa\u73af\u548c\u5339\u914d\u800c\u5df2\u3002\n\n\u63a5\u4e0b\u6765\u6709\u5de5\u4f5c\u8981\u505a\uff0c\u6240\u4ee5 shell \u7684\u5b66\u4e60\u6682\u65f6\u5148\u544a\u4e00\u6bb5\u843d\u3002\n\n## \u5b9e\u73b0\u4ee3\u7801\n\n```#\n#!\/bin\/bash\necho '--\u5f00\u59cb\u4e0b\u8f7d\u9996\u9875--'\ncurl -s 'http:\/\/man.linuxde.net\/par\/5' > .\/html\/index.html\nmh=.\/html\/index.html\nsl=$(nl $mh | grep '<div class=\"list_bd clearfix\">' | head -1 | sed 's\/^[ \t]*\/\/g' | cut -d ' ' -f1)\nel=$(nl $mh | grep \"<div class='paging'>\" | head -1 | sed 's\/^[ \t]*\/\/g' | cut -d ' ' -f1)\nsed -n  \"$sl\",\"$el\"'p' $mh > main.htm\n\necho '--\u5f00\u59cb\u4e0b\u8f7d\u5185\u9875--'\n#<a href=\"\nwhile read line; do\n  url=$(echo $line | grep '<a href=\"' | sed 's\/<div class=\"name\"><a href=\"\/\/g' | cut -d '\"' -f1)\n  if [[ -n $url ]]; then\n    echo '--\u5f00\u59cb\u4e0b\u8f7d' $name '\u9875\u9762--'\n    name=$(echo $url | cut -d '\/' -f4)\n    html='.\/html\/'$name'.html'\n    curl -s $url > $html\n    # echo '--\u5f00\u59cb\u5904\u7406' $name '\u9875\u9762\u94fe\u63a5--'\n    # sed -i 's\/http:\\\/\\\/man\\.linuxde\\.net\\\/\/g' $html\n  fi\ndone < main.htm\n\necho '--\u9875\u9762\u4e0b\u8f7d\u5b8c\u6210--'\necho '--\u5904\u7406\u9875\u9762\u94fe\u63a5--'\n\nsed -i '' 's\/http:\\\/\\\/man\\.linuxde\\.net\\\/\/\/g' $(grep -rl 'http:\/\/man.linuxde.net' .\/html)\nsed -i '' 's\/\" title=\"\/\\.html\" title=\"\/g' $(grep -rl '\" title=\"' .\/html)\necho '--\u94fe\u63a5\u5904\u7406\u5b8c\u6210--'\n```\n\n## \u5b9e\u73b0\u539f\u7406\n\n1. \u5148\u4e0b\u8f7d\u5217\u8868\u9996\u9875\u3002\u6211\u8fd9\u91cc\u53ea\u662f\u5c1d\u8bd5\uff0c\u6240\u4ee5\u53ea\u4e0b\u8f7d\u4e86\u7b2c\u4e00\u9875\u3002\u5982\u679c\u8981\u4e0b\u8f7d\u591a\u9875\uff0c\u505a\u597d\u5faa\u73af\u4e4b\u540e\uff0c\u81ea\u52a8\u4e0b\u8f7d\u5c31\u662f\u3002\n2. \u622a\u53d6\u9875\u9762\u7684\u5217\u8868\u5185\u5bb9\u533a\u57df\u3002\n3. \u6839\u636e\u9875\u9762\u7279\u70b9\uff0c\u62c6\u89e3\u51fa\u9875\u9762\u94fe\u63a5\u3002\n4. \u5faa\u73af\u4e0b\u8f7d\u94fe\u63a5\u5e76\u4fdd\u5b58\u3002\n5. \u6279\u91cf\u66ff\u6362\u9875\u9762\u7684\u94fe\u63a5\u4e0d\u5408\u9002\u7684\u5730\u65b9\u3002\n\n\u7136\u540e\u5c31\u5927\u529f\u544a\u6210\u4e86\u3002\n\n\u4e0d\u8fc7 `wget` \u6bd4 `curl` \u53ef\u80fd\u66f4\u9002\u5408\u5e72\u8fd9\u4e2a\u5de5\u4f5c\u3002\u6211\u76ee\u524d\u8fd8\u6ca1\u6709\u5b66\u5230\u5f88\u6df1\u5165\u3002\u56de\u5934\u6709\u65f6\u95f4\u518d\u63a5\u7740\u7814\u7a76\u4e00\u4e0b\u3002\n\n## \u540e\u7eed\u8865\u5145\n\n\u770b\u4e86\u4e0b `wget` \u6211\u6c14\u70b8\u4e86\u3002\u539f\u6765\u6211\u8981\u4e0b\u8f7d\u4eba\u5bb6\u7f51\u7ad9\u5168\u7ad9\uff0c\u7528 `wget` \u4e00\u53e5\u547d\u4ee4\u5c31\u53ef\u4ee5\u641e\u5b9a\u4e86 -_-|||\n\n```#\nwget --mirror -p --convert-links -P .\/ http:\/\/man.linuxde.net\/\n```\n\n\u795e\u5947\u7684 `shell` \uff01\n\n\u4ee5\u4e0a\u811a\u672c\u5747\u5728 mac \u4e0b\u6d4b\u8bd5\u901a\u8fc7\uff0c\u5728 Linux \u4e0b\u53ef\u80fd\u4f1a\u6709\u7a0d\u8bb8\u4e0d\u540c\u3002 \n\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002\n\n\n","private":0,"tags":"shell,\u811a\u672c,curl,wget","categories":"Linux\\CentOS","channel":"14","type":"original","status":1},"error":"","status":true}