{"data":{"id":"76638178","title":"Shell \u547d\u4ee4\u884c\uff0c\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u72b6\u6001\u6279\u91cf\u67e5\u8be2\u662f\u5426\u6b63\u5e38\u7684\u811a\u672c","articleedittype":1,"description":"Shell \u547d\u4ee4\u884c\uff0c\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u72b6\u6001\u6279\u91cf\u67e5\u8be2\u662f\u5426\u6b63\u5e38\u7684\u811a\u672c\u5982\u679c\u4f60\u6709\u6bd4\u8f83\u591a\u7684\u7f51\u7ad9\uff0c\u8fd9\u4e9b\u7f51\u7ad9\u7684\u8fd0\u884c\u72b6\u6001\u662f\u5426\u6b63\u5e38\u5219\u662f\u4e00\u4ef6\u9700\u8981\u5173\u5fc3\u7684\u4e8b\u60c5\u3002\u4f46\u662f\u9010\u4e00\u6253\u5f00\u68c0\u67e5\u90a3\u7b80\u76f4\u662f\u4e00\u4ef6\u592a\u7cdf\u5fc3\u7684\u4e8b\u60c5\u4e86\u3002\u6240\u4ee5\uff0c\u6211\u60f3\u5199\u4e00\u4e2a shell \u811a\u672c\u6765\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u8fdb\u884c\u6279\u91cf\u72b6\u6001\u67e5\u8be2\u7684\u811a\u672c\u3002\u539f\u7406\u6ca1\u4ec0\u4e48\u8981\u89e3\u91ca\u7684\uff0c\u5c31\u662f\u4f7f\u7528 curl -I \u5bf9\u7f51\u7ad9\u7684\u72b6\u6001\u7801\u8fdb\u884c\u67e5\u8be2\u3002\u8f6e\u7740\u67e5\u5c31\u662f\u4e86\u3002\u6587\u4ef6\u51c6\u5907\u5728\u8981\u6267\u884c\u7684\u811a\u672c\u6587\u4ef6\u5939\u4e0b\u9762\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6\u548c\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u5206\u522b\u662f","content":"<h1 id=\"shell-\u547d\u4ee4\u884c\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u72b6\u6001\u6279\u91cf\u67e5\u8be2\u662f\u5426\u6b63\u5e38\u7684\u811a\u672c\">Shell \u547d\u4ee4\u884c\uff0c\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u72b6\u6001\u6279\u91cf\u67e5\u8be2\u662f\u5426\u6b63\u5e38\u7684\u811a\u672c<\/h1>\n\n<p>\u5982\u679c\u4f60\u6709\u6bd4\u8f83\u591a\u7684\u7f51\u7ad9\uff0c\u8fd9\u4e9b\u7f51\u7ad9\u7684\u8fd0\u884c\u72b6\u6001\u662f\u5426\u6b63\u5e38\u5219\u662f\u4e00\u4ef6\u9700\u8981\u5173\u5fc3\u7684\u4e8b\u60c5\u3002\u4f46\u662f\u9010\u4e00\u6253\u5f00\u68c0\u67e5\u90a3\u7b80\u76f4\u662f\u4e00\u4ef6\u592a\u7cdf\u5fc3\u7684\u4e8b\u60c5\u4e86\u3002\u6240\u4ee5\uff0c\u6211\u60f3\u5199\u4e00\u4e2a shell \u811a\u672c\u6765\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u8fdb\u884c\u6279\u91cf\u72b6\u6001\u67e5\u8be2\u7684\u811a\u672c\u3002<\/p>\n\n<p>\u539f\u7406\u6ca1\u4ec0\u4e48\u8981\u89e3\u91ca\u7684\uff0c\u5c31\u662f\u4f7f\u7528 <code>curl -I<\/code> \u5bf9\u7f51\u7ad9\u7684\u72b6\u6001\u7801\u8fdb\u884c\u67e5\u8be2\u3002\u8f6e\u7740\u67e5\u5c31\u662f\u4e86\u3002<\/p>\n\n\n\n<h2 id=\"\u6587\u4ef6\u51c6\u5907\">\u6587\u4ef6\u51c6\u5907<\/h2>\n\n<p>\u5728\u8981\u6267\u884c\u7684\u811a\u672c\u6587\u4ef6\u5939\u4e0b\u9762\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6\u548c\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u5206\u522b\u662f<\/p>\n\n<table>\n<thead>\n<tr>\n  <th align=\"left\">\u6587\u4ef6\u3001\u6587\u4ef6\u5939<\/th>\n  <th align=\"left\">\u8bf4\u660e<\/th>\n<\/tr>\n<\/thead>\n<tbody><tr>\n  <td align=\"left\">.\/watch.sh<\/td>\n  <td align=\"left\">\u6211\u4eec\u7684\u6279\u91cf\u67e5\u8be2\u811a\u672c\u6587\u4ef6<\/td>\n<\/tr>\n<tr>\n  <td align=\"left\">.\/siteList.txt<\/td>\n  <td align=\"left\">\u6211\u4eec\u7684\u57df\u540d\u5217\u8868\u6587\u4ef6<\/td>\n<\/tr>\n<tr>\n  <td align=\"left\">.\/log\/<\/td>\n  <td align=\"left\">\u5b58\u653e\u65e5\u5fd7\u7684\u6587\u4ef6\u5939<\/td>\n<\/tr>\n<\/tbody><\/table>\n\n\n<p>\u5f53\u7136\uff0c\u4f60\u4e0d\u9700\u8981\u5b8c\u5168\u6309\u7167\u6211\u7684\u8bbe\u8ba1\u6765\uff0c\u4f46\u662f\u9700\u8981\u77e5\u9053\u4e00\u4e00\u5bf9\u5e94\u7684\u77e5\u9053\u6587\u4ef6\u5173\u7cfb\u3002<\/p>\n\n<p><strong>siteList.txt<\/strong> \u6587\u4ef6\u5185\u5bb9<\/p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs avrasm\">www<span class=\"hljs-preprocessor\">.youtube<\/span><span class=\"hljs-preprocessor\">.com<\/span>\nwww<span class=\"hljs-preprocessor\">.google<\/span><span class=\"hljs-preprocessor\">.com<\/span>\nwww<span class=\"hljs-preprocessor\">.xxx<\/span><span class=\"hljs-preprocessor\">.com<\/span>\nwww<span class=\"hljs-preprocessor\">.baidu<\/span><span class=\"hljs-preprocessor\">.com<\/span>\nwww<span class=\"hljs-preprocessor\">.sina<\/span><span class=\"hljs-preprocessor\">.com<\/span><span class=\"hljs-preprocessor\">.cn<\/span>\nwww<span class=\"hljs-preprocessor\">.weibo<\/span><span class=\"hljs-preprocessor\">.com<\/span>\nwww<span class=\"hljs-preprocessor\">.sohu<\/span><span class=\"hljs-preprocessor\">.com<\/span>\nwww<span class=\"hljs-preprocessor\">.renren<\/span><span class=\"hljs-preprocessor\">.com<\/span><\/code><\/pre>\n\n<p>\u5982\u4e0a\u7684\u57df\u540d\u5217\u8868\uff0c\u4e00\u884c\u4e00\u4e2a\uff0c\u628a\u4f60\u7684\u7f51\u7ad9\u5168\u5199\u8fdb\u53bb\u5373\u53ef\u3002<\/p>\n\n\n\n<h2 id=\"\u5b9e\u73b0-shell-\u811a\u672c\">\u5b9e\u73b0 shell \u811a\u672c<\/h2>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs bash\">logfile=<span class=\"hljs-string\">'.\/log\/webSite-Status-'<\/span>`date <span class=\"hljs-string\">'+%Y%m%d'<\/span>`<span class=\"hljs-string\">'.log'<\/span>\n<span class=\"hljs-comment\">#touch $logfile<\/span>\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--- watch web site by Fungleo ---'<\/span> &gt;&gt; <span class=\"hljs-variable\">$logfile<\/span>\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--- Web:blog.csdn.net\/fungleo ---'<\/span> &gt;&gt; <span class=\"hljs-variable\">$logfile<\/span>\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'--- Begin '<\/span>`date <span class=\"hljs-string\">'+%Y-%m-%d %H:%M:%S'<\/span>`<span class=\"hljs-string\">' ---'<\/span> &gt;&gt; <span class=\"hljs-variable\">$logfile<\/span>\n\nsitelist=siteList.txt\n\ni=<span class=\"hljs-number\">0<\/span>\nl=$(wc <span class=\"hljs-operator\">-l<\/span> <span class=\"hljs-variable\">$sitelist<\/span> | sed <span class=\"hljs-string\">'s\/^[ \\t]*\/\/g'<\/span> | cut <span class=\"hljs-operator\">-d<\/span> <span class=\"hljs-string\">' '<\/span> <span class=\"hljs-operator\">-f<\/span>1)\n<span class=\"hljs-keyword\">while<\/span> <span class=\"hljs-built_in\">read<\/span> url; <span class=\"hljs-keyword\">do<\/span>\n  <span class=\"hljs-comment\"># \u8fdb\u5ea6\u767e\u5206\u6bd4<\/span>\n  <span class=\"hljs-built_in\">echo<\/span> -en <span class=\"hljs-string\">\"\\b\\b\\b\\b\"<\/span>`<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-variable\">$i<\/span>*<span class=\"hljs-number\">100<\/span>\/<span class=\"hljs-variable\">$l<\/span> | bc `<span class=\"hljs-string\">'%'<\/span>\n  ((i++))\n  <span class=\"hljs-comment\"># \u8fd0\u884c\u5185\u5bb9<\/span>\n  <span class=\"hljs-comment\">#result=$(curl --connect-timeout 3 -sI $url )<\/span>\n  result=$(curl --connect-timeout <span class=\"hljs-number\">3<\/span> <span class=\"hljs-operator\">-s<\/span>L -D- <span class=\"hljs-variable\">$url<\/span> -o \/dev\/null)\n  curl_status=$?\n  <span class=\"hljs-keyword\">if<\/span> [[ <span class=\"hljs-variable\">$curl_status<\/span> <span class=\"hljs-operator\">-eq<\/span> <span class=\"hljs-number\">0<\/span> ]]; <span class=\"hljs-keyword\">then<\/span>\n    status=$(<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-variable\">$result<\/span> | grep HTTP | cut <span class=\"hljs-operator\">-d<\/span> <span class=\"hljs-string\">' '<\/span> <span class=\"hljs-operator\">-f<\/span>2)\n  <span class=\"hljs-keyword\">else<\/span>\n    status=<span class=\"hljs-string\">'die'<\/span>\n  <span class=\"hljs-keyword\">fi<\/span>\n  <span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-string\">'status:'<\/span><span class=\"hljs-variable\">$status<\/span><span class=\"hljs-string\">' | curl status:'<\/span><span class=\"hljs-variable\">$curl_status<\/span><span class=\"hljs-string\">' | site:'<\/span><span class=\"hljs-variable\">$url<\/span>  &gt;&gt; <span class=\"hljs-variable\">$logfile<\/span>\n<span class=\"hljs-keyword\">done<\/span> &lt; <span class=\"hljs-variable\">$sitelist<\/span>;\n\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-operator\">-e<\/span> <span class=\"hljs-string\">'--- End '<\/span>`date <span class=\"hljs-string\">'+%Y-%m-%d %H:%M:%S'<\/span>`<span class=\"hljs-string\">' ---\\n'<\/span> &gt;&gt; <span class=\"hljs-variable\">$logfile<\/span>\n<span class=\"hljs-built_in\">echo<\/span> <span class=\"hljs-operator\">-e<\/span> <span class=\"hljs-string\">'\\b\\b\\b\\bOK     '<\/span><\/code><\/pre>\n\n<h2 id=\"\u89e3\u91ca\u539f\u7406\">\u89e3\u91ca\u539f\u7406<\/h2>\n\n<ol>\n<li>\u6839\u636e\u5f53\u524d\u65f6\u95f4\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u5b58\u653e\u5728 <code>.\/log\/<\/code> \u6587\u4ef6\u5939\u4e0b<\/li>\n<li>\u8f93\u51fa\u5f00\u5934\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u53ef\u4ee5\u81ea\u884c\u8c03\u6574<\/li>\n<li>\u83b7\u53d6\u57df\u540d\u5217\u8868\u6587\u4ef6\u5e76\u5b58\u653e\u5230\u53d8\u91cf<\/li>\n<li>\u8ba1\u7b97\u8fdb\u5ea6\u767e\u5206\u6bd4\u5185\u5bb9\uff0c\u66f4\u591a\u53c2\u8003 <a href=\"http:\/\/blog.csdn.net\/fungleo\/article\/details\/76576487\">Shell \u5faa\u73af\u4e2d\u5b9e\u73b0\u5c55\u793a\u8fdb\u5ea6\u767e\u5206\u6bd4\u7684\u811a\u672c\u65b9\u6cd5<\/a><\/li>\n<li><code>curl<\/code> \u53bb\u67e5\u72b6\u6001\u7801\uff0c\u8d85\u8fc73\u79d2\u5c31\u8ba4\u4e3a\u662f\u5931\u8d25\u4e86\u3002\u65f6\u95f4\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002<\/li>\n<li>\u6839\u636e\u6267\u884c\u7ed3\u679c\u5224\u65ad\u662f\u5426\u6b63\u5e38\uff0c\u6b63\u5e38\u5c31\u8fd4\u56de\u6b63\u5e38\u7684<code>HTTP<\/code>\u72b6\u6001\u7801\uff0c\u5426\u5219\u8f93\u51fa<code>die<\/code><\/li>\n<li>\u5c06\u6267\u884c\u7ed3\u679c\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6<\/li>\n<li>\u6253\u5370\u5b8c\u6210\u65f6\u95f4<\/li>\n<li>\u5728\u7ec8\u7aef\u6807\u51c6\u8f93\u51fa <code>ok<\/code> \u8868\u793a\u811a\u672c\u6267\u884c\u5b8c\u6210\u3002<\/li>\n<\/ol>\n\n\n\n<h2 id=\"\u540e\u7eed\">\u540e\u7eed<\/h2>\n\n<p>\u5728 <code>curl -I www.qq.com<\/code> \u7684\u65f6\u5019\uff0c\u957f\u65f6\u95f4\u6ca1\u6709\u54cd\u5e94\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u3002\u53ef\u80fd\u662fQQ\u7f51\u7ad9\u7981\u6b62\u8fd9\u6837\u67e5\u8be2\u3002\u4f46\u5982\u4f55\u8df3\u8fc7\u4e0d\u77e5\u9053\u600e\u4e48\u89e3\u51b3\uff0c\u6211\u662f\u8bbe\u5b9a\u4e86\u8d85\u51fa\u65f6\u95f4\u7684\u3002\u6bd4\u8f83\u5947\u602a\uff0c\u6709\u77e5\u9053\u7684\u670b\u53cb\u544a\u8bc9\u6211\u4e00\u4e0b\u3002<\/p>\n\n<blockquote>\n  <p>\u4e0a\u7f51\u67e5\u4e86\u4e00\u4e0b\u76f8\u5173\u8d44\u6599\uff0c\u5c06  <code>result=$(curl --connect-timeout 3 -sI $url )<\/code> \u66f4\u6362\u4e3a <code>result=$(curl --connect-timeout 3 -sL -D- $url -o \/dev\/null)<\/code> \u5c31\u89e3\u51b3\u4e86\u67e5 www.qq.com \u4f1a\u505c\u6b62\u54cd\u5e94\u7684\u95ee\u9898\u3002\u56e0\u4e3a\u6709\u4e00\u4e9b\u7f51\u7ad9\u4f1a\u5c4f\u853d\u6389 <code>head<\/code> \u67e5\u8be2\u3002 <br>\n  \u7b97\u89e3\u51b3\u4e86\u3002\u4f60\u6709\u66f4\u597d\u7684\u65b9\u6cd5\u5417\uff1f<\/p>\n<\/blockquote>\n\n<p>\u5728 MAC \u4e0b\uff0c\u8fd9\u4e2a\u811a\u672c\u7528 <code>sh watch.sh<\/code> \u6267\u884c\u4f1a\u8f7b\u5fae\u51fa\u9519\uff0c\u5fc5\u987b\u7528 <code>bash watch.sh<\/code> \u6267\u884c\u3002<\/p>\n\n<p>\u6216 <code>chmod +x .\/watch.sh<\/code> \u8d4b\u4e88\u6267\u884c\u6743\u9650\u540e <code>.\/watch.sh<\/code> \u6267\u884c\u3002<\/p>\n\n<p>\u4ee5\u4e0a\u811a\u672c\u5747\u5728 mac \u4e0b\u6d4b\u8bd5\u901a\u8fc7\uff0c\u5728 Linux \u4e0b\u53ef\u80fd\u4f1a\u6709\u7a0d\u8bb8\u4e0d\u540c\u3002 <br>\n\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002<\/p>","markdowncontent":"# Shell \u547d\u4ee4\u884c\uff0c\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u72b6\u6001\u6279\u91cf\u67e5\u8be2\u662f\u5426\u6b63\u5e38\u7684\u811a\u672c\n\n\u5982\u679c\u4f60\u6709\u6bd4\u8f83\u591a\u7684\u7f51\u7ad9\uff0c\u8fd9\u4e9b\u7f51\u7ad9\u7684\u8fd0\u884c\u72b6\u6001\u662f\u5426\u6b63\u5e38\u5219\u662f\u4e00\u4ef6\u9700\u8981\u5173\u5fc3\u7684\u4e8b\u60c5\u3002\u4f46\u662f\u9010\u4e00\u6253\u5f00\u68c0\u67e5\u90a3\u7b80\u76f4\u662f\u4e00\u4ef6\u592a\u7cdf\u5fc3\u7684\u4e8b\u60c5\u4e86\u3002\u6240\u4ee5\uff0c\u6211\u60f3\u5199\u4e00\u4e2a shell \u811a\u672c\u6765\u5b9e\u73b0\u5bf9\u82e5\u5e72\u7f51\u7ad9\u8fdb\u884c\u6279\u91cf\u72b6\u6001\u67e5\u8be2\u7684\u811a\u672c\u3002\n\n\u539f\u7406\u6ca1\u4ec0\u4e48\u8981\u89e3\u91ca\u7684\uff0c\u5c31\u662f\u4f7f\u7528 `curl -I` \u5bf9\u7f51\u7ad9\u7684\u72b6\u6001\u7801\u8fdb\u884c\u67e5\u8be2\u3002\u8f6e\u7740\u67e5\u5c31\u662f\u4e86\u3002\n\n## \u6587\u4ef6\u51c6\u5907\n\n\u5728\u8981\u6267\u884c\u7684\u811a\u672c\u6587\u4ef6\u5939\u4e0b\u9762\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6\u548c\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u5206\u522b\u662f\n\n| \u6587\u4ef6\u3001\u6587\u4ef6\u5939|\u8bf4\u660e|\n|:---|:---|\n| .\/watch.sh | \u6211\u4eec\u7684\u6279\u91cf\u67e5\u8be2\u811a\u672c\u6587\u4ef6 |\n| .\/siteList.txt | \u6211\u4eec\u7684\u57df\u540d\u5217\u8868\u6587\u4ef6 |\n| .\/log\/ | \u5b58\u653e\u65e5\u5fd7\u7684\u6587\u4ef6\u5939 |\n\n\u5f53\u7136\uff0c\u4f60\u4e0d\u9700\u8981\u5b8c\u5168\u6309\u7167\u6211\u7684\u8bbe\u8ba1\u6765\uff0c\u4f46\u662f\u9700\u8981\u77e5\u9053\u4e00\u4e00\u5bf9\u5e94\u7684\u77e5\u9053\u6587\u4ef6\u5173\u7cfb\u3002\n\n**siteList.txt** \u6587\u4ef6\u5185\u5bb9\n```\nwww.youtube.com\nwww.google.com\nwww.xxx.com\nwww.baidu.com\nwww.sina.com.cn\nwww.weibo.com\nwww.sohu.com\nwww.renren.com\n```\n\u5982\u4e0a\u7684\u57df\u540d\u5217\u8868\uff0c\u4e00\u884c\u4e00\u4e2a\uff0c\u628a\u4f60\u7684\u7f51\u7ad9\u5168\u5199\u8fdb\u53bb\u5373\u53ef\u3002\n\n## \u5b9e\u73b0 shell \u811a\u672c\n\n```\nlogfile='.\/log\/webSite-Status-'`date '+%Y%m%d'`'.log'\n#touch $logfile\necho '--- watch web site by Fungleo ---' >> $logfile\necho '--- Web:blog.csdn.net\/fungleo ---' >> $logfile\necho '--- Begin '`date '+%Y-%m-%d %H:%M:%S'`' ---' >> $logfile\n\nsitelist=siteList.txt\n\ni=0\nl=$(wc -l $sitelist | sed 's\/^[ \\t]*\/\/g' | cut -d ' ' -f1)\nwhile read url; do\n  # \u8fdb\u5ea6\u767e\u5206\u6bd4\n  echo -en \"\\b\\b\\b\\b\"`echo $i*100\/$l | bc `'%'\n  ((i++))\n  # \u8fd0\u884c\u5185\u5bb9\n  #result=$(curl --connect-timeout 3 -sI $url )\n  result=$(curl --connect-timeout 3 -sL -D- $url -o \/dev\/null)\n  curl_status=$?\n  if [[ $curl_status -eq 0 ]]; then\n    status=$(echo $result | grep HTTP | cut -d ' ' -f2)\n  else\n    status='die'\n  fi\n  echo 'status:'$status' | curl status:'$curl_status' | site:'$url  >> $logfile\ndone < $sitelist;\n\necho -e '--- End '`date '+%Y-%m-%d %H:%M:%S'`' ---\\n' >> $logfile\necho -e '\\b\\b\\b\\bOK     '\n```\n\n## \u89e3\u91ca\u539f\u7406\n\n1. \u6839\u636e\u5f53\u524d\u65f6\u95f4\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u5b58\u653e\u5728 `.\/log\/` \u6587\u4ef6\u5939\u4e0b\n2. \u8f93\u51fa\u5f00\u5934\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u53ef\u4ee5\u81ea\u884c\u8c03\u6574\n3. \u83b7\u53d6\u57df\u540d\u5217\u8868\u6587\u4ef6\u5e76\u5b58\u653e\u5230\u53d8\u91cf\n4. \u8ba1\u7b97\u8fdb\u5ea6\u767e\u5206\u6bd4\u5185\u5bb9\uff0c\u66f4\u591a\u53c2\u8003 [Shell \u5faa\u73af\u4e2d\u5b9e\u73b0\u5c55\u793a\u8fdb\u5ea6\u767e\u5206\u6bd4\u7684\u811a\u672c\u65b9\u6cd5](http:\/\/blog.csdn.net\/fungleo\/article\/details\/76576487)\n5. `curl` \u53bb\u67e5\u72b6\u6001\u7801\uff0c\u8d85\u8fc73\u79d2\u5c31\u8ba4\u4e3a\u662f\u5931\u8d25\u4e86\u3002\u65f6\u95f4\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002\n6. \u6839\u636e\u6267\u884c\u7ed3\u679c\u5224\u65ad\u662f\u5426\u6b63\u5e38\uff0c\u6b63\u5e38\u5c31\u8fd4\u56de\u6b63\u5e38\u7684`HTTP`\u72b6\u6001\u7801\uff0c\u5426\u5219\u8f93\u51fa`die`\n7. \u5c06\u6267\u884c\u7ed3\u679c\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\n8. \u6253\u5370\u5b8c\u6210\u65f6\u95f4\n9. \u5728\u7ec8\u7aef\u6807\u51c6\u8f93\u51fa `ok` \u8868\u793a\u811a\u672c\u6267\u884c\u5b8c\u6210\u3002\n\n## \u540e\u7eed\n\n\u5728 `curl -I www.qq.com` \u7684\u65f6\u5019\uff0c\u957f\u65f6\u95f4\u6ca1\u6709\u54cd\u5e94\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u3002\u53ef\u80fd\u662fQQ\u7f51\u7ad9\u7981\u6b62\u8fd9\u6837\u67e5\u8be2\u3002\u4f46\u5982\u4f55\u8df3\u8fc7\u4e0d\u77e5\u9053\u600e\u4e48\u89e3\u51b3\uff0c\u6211\u662f\u8bbe\u5b9a\u4e86\u8d85\u51fa\u65f6\u95f4\u7684\u3002\u6bd4\u8f83\u5947\u602a\uff0c\u6709\u77e5\u9053\u7684\u670b\u53cb\u544a\u8bc9\u6211\u4e00\u4e0b\u3002\n\n> \u4e0a\u7f51\u67e5\u4e86\u4e00\u4e0b\u76f8\u5173\u8d44\u6599\uff0c\u5c06  `result=$(curl --connect-timeout 3 -sI $url )` \u66f4\u6362\u4e3a `result=$(curl --connect-timeout 3 -sL -D- $url -o \/dev\/null)` \u5c31\u89e3\u51b3\u4e86\u67e5 www.qq.com \u4f1a\u505c\u6b62\u54cd\u5e94\u7684\u95ee\u9898\u3002\u56e0\u4e3a\u6709\u4e00\u4e9b\u7f51\u7ad9\u4f1a\u5c4f\u853d\u6389 `head` \u67e5\u8be2\u3002\n> \u7b97\u89e3\u51b3\u4e86\u3002\u4f60\u6709\u66f4\u597d\u7684\u65b9\u6cd5\u5417\uff1f\n\n\u5728 MAC \u4e0b\uff0c\u8fd9\u4e2a\u811a\u672c\u7528 `sh watch.sh` \u6267\u884c\u4f1a\u8f7b\u5fae\u51fa\u9519\uff0c\u5fc5\u987b\u7528 `bash watch.sh` \u6267\u884c\u3002\n\n\u6216 `chmod +x .\/watch.sh` \u8d4b\u4e88\u6267\u884c\u6743\u9650\u540e `.\/watch.sh` \u6267\u884c\u3002\n\n\u4ee5\u4e0a\u811a\u672c\u5747\u5728 mac \u4e0b\u6d4b\u8bd5\u901a\u8fc7\uff0c\u5728 Linux \u4e0b\u53ef\u80fd\u4f1a\u6709\u7a0d\u8bb8\u4e0d\u540c\u3002\n\u672c\u6587\u7531 FungLeo \u539f\u521b\uff0c\u5141\u8bb8\u8f6c\u8f7d\uff0c\u4f46\u8f6c\u8f7d\u5fc5\u987b\u4fdd\u7559\u9996\u53d1\u94fe\u63a5\u3002\n\n","private":0,"tags":"shell,\u811a\u672c,curl,\u67e5\u770b\u7f51\u7ad9\u72b6\u6001","categories":"Linux\\CentOS","channel":"14","type":"original","status":1},"error":"","status":true}